<!DOCTYPE html><html lang="[&quot;en&quot;,&quot;zh-CN&quot;,&quot;default&quot;]"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Npc"><meta name="copyright" content="Npc"><meta name="generator" content="Hexo 7.1.1"><meta name="theme" content="hexo-theme-yun"><title>re4bÈòÖËØªÁ¨îËÆ∞ | Npc | Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"onelastchick.github.io","root":"/","title":"NpcÂ∞èÁ´ô","version":"1.10.11","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"waline":{"config":{"enable":true,"serverURL":"https://waline-onelastchicks-projects.vercel.app/","comment":false,"el":"#waline","lang":["en","zh-CN","default"]},"cdn":"https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="Part.1 ÂâçË®Ä ÈòÖËØªËøôÁßç‰π¶Á±çÔºåÂ¶ÇÊûúÊàë‰∏çÂÅöÁ¨îËÆ∞ÔºåÊàëÂèØËÉΩÂ∞±‰ºöËµ∞È©¨ËßÇËä±ÁöÑÁ≤óÁï•Áúã‰∏ÄÈÅçÔºåÁªìÊûú‰ªÄ‰πàÈÉΩÊ≤°Â≠¶‰ºöÔºåÁúºÁùõ‰ºö‰∫ÜÔºåËÑëÂ≠ê‰∏ç‰ºöÔºåÊâÄ‰ª•ÊàëÂáÜÂ§áËæπÂÅöÁ¨îËÆ∞ËæπÂ≠¶Ôºå‰∫âÂèñÊääÂü∫Á°ÄÊâìÊâéÂÆû ÂØπ‰∫éÈÄÜÂêëÂ∑•Á®ãÊùÉÂ®ÅÊåáÂçóÂÖ≥ÈîÆÈÉ®ÂàÜÁöÑÊëòÂΩï,Êï¥ÁêÜ‰ª•Âèä‰∏™‰∫∫ÁöÑÁêÜËß£ ÈÄÜÂêëÂ∑•Á®ãÊùÉÂ®ÅÊåáÂçóÊòØÂÖ•Èó®ÈÄÜÂêëÂøÖËØªÁöÑ‰∏ÄÊú¨‰π¶Á±ç Áî±‰∫éÊàëÊòØÂàùÂ≠¶ËÄÖÔºåÊâÄ‰ª•ÊàëÁõÆÂâçÂè™Â≠¶‰π†re4b x86Ê±áÁºñÈÉ®ÂàÜÔºà‰∏çËÉΩË¥™Â§öÔºâÔºåÂØπ‰∫éARM‰ª•ÂèäMIPSÊû∂ÊûÑÂæÖ‰ª•ÂêéËøõÈò∂ÂêéÂÜçËøõË°åÂ≠¶‰π†  Part.2 Êåá">
<meta property="og:type" content="article">
<meta property="og:title" content="re4bÈòÖËØªÁ¨îËÆ∞">
<meta property="og:url" content="http://onelastchick.github.io/2024/05/23/re4b%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Npc | Blog">
<meta property="og:description" content="Part.1 ÂâçË®Ä ÈòÖËØªËøôÁßç‰π¶Á±çÔºåÂ¶ÇÊûúÊàë‰∏çÂÅöÁ¨îËÆ∞ÔºåÊàëÂèØËÉΩÂ∞±‰ºöËµ∞È©¨ËßÇËä±ÁöÑÁ≤óÁï•Áúã‰∏ÄÈÅçÔºåÁªìÊûú‰ªÄ‰πàÈÉΩÊ≤°Â≠¶‰ºöÔºåÁúºÁùõ‰ºö‰∫ÜÔºåËÑëÂ≠ê‰∏ç‰ºöÔºåÊâÄ‰ª•ÊàëÂáÜÂ§áËæπÂÅöÁ¨îËÆ∞ËæπÂ≠¶Ôºå‰∫âÂèñÊääÂü∫Á°ÄÊâìÊâéÂÆû ÂØπ‰∫éÈÄÜÂêëÂ∑•Á®ãÊùÉÂ®ÅÊåáÂçóÂÖ≥ÈîÆÈÉ®ÂàÜÁöÑÊëòÂΩï,Êï¥ÁêÜ‰ª•Âèä‰∏™‰∫∫ÁöÑÁêÜËß£ ÈÄÜÂêëÂ∑•Á®ãÊùÉÂ®ÅÊåáÂçóÊòØÂÖ•Èó®ÈÄÜÂêëÂøÖËØªÁöÑ‰∏ÄÊú¨‰π¶Á±ç Áî±‰∫éÊàëÊòØÂàùÂ≠¶ËÄÖÔºåÊâÄ‰ª•ÊàëÁõÆÂâçÂè™Â≠¶‰π†re4b x86Ê±áÁºñÈÉ®ÂàÜÔºà‰∏çËÉΩË¥™Â§öÔºâÔºåÂØπ‰∫éARM‰ª•ÂèäMIPSÊû∂ÊûÑÂæÖ‰ª•ÂêéËøõÈò∂ÂêéÂÜçËøõË°åÂ≠¶‰π†  Part.2 Êåá">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-05-23T08:25:47.000Z">
<meta property="article:modified_time" content="2024-05-29T15:32:21.671Z">
<meta property="article:author" content="Npc">
<meta property="article:tag" content="Â≠¶‰π†Á¨îËÆ∞">
<meta name="twitter:card" content="summary"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Npc"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Npc"><span class="site-author-status">üò≠</span></a><div class="site-author-name"><a href="/about/">Npc</a></div><span class="site-name">Npc | Blog</span><sub class="site-subtitle">ÊÉ≥s</sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">25</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">11</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ÁïôË®ÄÊùø"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/OneLastChick" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@1930278836@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="ÊàëÁöÑÂ∞è‰ºô‰º¥‰ª¨" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#part1-%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text"> Part.1 ÂâçË®Ä</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#part2-%E6%8C%87%E4%BB%A4%E8%AE%B2%E8%A7%A3"><span class="toc-number">2.</span> <span class="toc-text"> Part.2 Êåá‰ª§ËÆ≤Ëß£</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#chapter1-cpu"><span class="toc-number">2.1.</span> <span class="toc-text"> Chapter1 CPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap2-%E6%9C%80%E7%AE%80%E5%87%BD%E6%95%B0"><span class="toc-number">2.2.</span> <span class="toc-text"> Chap2 ÊúÄÁÆÄÂáΩÊï∞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap3-helloworld"><span class="toc-number">2.3.</span> <span class="toc-text"> Chap3 Hello,World!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#msvs"><span class="toc-number">2.3.1.</span> <span class="toc-text"> msvs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcc"><span class="toc-number">2.3.2.</span> <span class="toc-text"> gcc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#msvs-x86-64"><span class="toc-number">2.3.3.</span> <span class="toc-text"> msvs x86-64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcc-x86-64"><span class="toc-number">2.3.4.</span> <span class="toc-text"> gcc x86-64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#problems"><span class="toc-number">2.3.5.</span> <span class="toc-text"> Problems</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap4-%E5%87%BD%E6%95%B0%E5%BA%8F%E8%A8%80%E5%92%8C%E5%87%BD%E6%95%B0%E5%B0%BE%E5%A3%B0"><span class="toc-number">2.4.</span> <span class="toc-text"> Chap4 ÂáΩÊï∞Â∫èË®ÄÂíåÂáΩÊï∞Â∞æÂ£∞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap5-%E6%A0%88"><span class="toc-number">2.5.</span> <span class="toc-text"> Chap5 Ê†à</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">2.5.1.</span> <span class="toc-text"> Ê†àÁöÑÁî®ÈÄî</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%88%E7%9A%84%E5%99%AA%E9%9F%B3"><span class="toc-number">2.5.2.</span> <span class="toc-text"> Ê†àÁöÑÂô™Èü≥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#problems-2"><span class="toc-number">2.5.3.</span> <span class="toc-text"> Problems</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#51"><span class="toc-number">2.5.3.1.</span> <span class="toc-text"> 5.1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#52"><span class="toc-number">2.5.3.2.</span> <span class="toc-text"> 5.2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap6-printf%E5%87%BD%E6%95%B0%E4%B8%8E%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-number">2.6.</span> <span class="toc-text"> Chap6 printf()ÂáΩÊï∞‰∏éÂèÇÊï∞‰º†ÈÄí</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#x86"><span class="toc-number">2.6.1.</span> <span class="toc-text"> x86</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap7-scanf"><span class="toc-number">2.7.</span> <span class="toc-text"> Chap7 scanf()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#x86-2"><span class="toc-number">2.7.1.</span> <span class="toc-text"> x86</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">2.7.2.</span> <span class="toc-text"> ÂÖ®Â±ÄÂèòÈáè</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#problem"><span class="toc-number">2.7.3.</span> <span class="toc-text"> Problem</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap8-%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96"><span class="toc-number">2.8.</span> <span class="toc-text"> Chap8 ÂèÇÊï∞Ëé∑Âèñ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chap9-%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">2.9.</span> <span class="toc-text"> Chap9 ËøîÂõûÂÄº</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#void%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">2.9.1.</span> <span class="toc-text"> voidÁ±ªÂûãÁöÑËøîÂõûÂÄº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%BA%E7%BB%93%E6%9E%84%E4%BD%93%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">2.9.1.1.</span> <span class="toc-text"> ËøîÂõûÂÄº‰∏∫ÁªìÊûÑ‰ΩìÂûãÊï∞ÊçÆ</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://onelastchick.github.io/2024/05/23/re4b%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Npc"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Npc | Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">re4bÈòÖËØªÁ¨îËÆ∞</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="Created: 2024-05-23 16:25:47" itemprop="dateCreated datePublished" datetime="2024-05-23T16:25:47+08:00">2024-05-23</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="Modified: 2024-05-29 23:32:21" itemprop="dateModified" datetime="2024-05-29T23:32:21+08:00">2024-05-29</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="Word count in article"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="Word count in article">7.3k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Reading time"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="Reading time">28m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/Reverse/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Reverse</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">Â≠¶‰π†Á¨îËÆ∞</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="part1-ÂâçË®Ä"><a class="markdownIt-Anchor" href="#part1-ÂâçË®Ä"></a> Part.1 ÂâçË®Ä</h1>
<p>ÈòÖËØªËøôÁßç‰π¶Á±çÔºåÂ¶ÇÊûúÊàë‰∏çÂÅöÁ¨îËÆ∞ÔºåÊàëÂèØËÉΩÂ∞±‰ºöËµ∞È©¨ËßÇËä±ÁöÑÁ≤óÁï•Áúã‰∏ÄÈÅçÔºåÁªìÊûú‰ªÄ‰πàÈÉΩÊ≤°Â≠¶‰ºöÔºåÁúºÁùõ‰ºö‰∫ÜÔºåËÑëÂ≠ê‰∏ç‰ºöÔºåÊâÄ‰ª•ÊàëÂáÜÂ§áËæπÂÅöÁ¨îËÆ∞ËæπÂ≠¶Ôºå‰∫âÂèñÊääÂü∫Á°ÄÊâìÊâéÂÆû</p>
<p>ÂØπ‰∫éÈÄÜÂêëÂ∑•Á®ãÊùÉÂ®ÅÊåáÂçóÂÖ≥ÈîÆÈÉ®ÂàÜÁöÑÊëòÂΩï,Êï¥ÁêÜ‰ª•Âèä‰∏™‰∫∫ÁöÑÁêÜËß£</p>
<p>ÈÄÜÂêëÂ∑•Á®ãÊùÉÂ®ÅÊåáÂçóÊòØÂÖ•Èó®ÈÄÜÂêëÂøÖËØªÁöÑ‰∏ÄÊú¨‰π¶Á±ç</p>
<p>Áî±‰∫éÊàëÊòØÂàùÂ≠¶ËÄÖÔºåÊâÄ‰ª•ÊàëÁõÆÂâçÂè™Â≠¶‰π†re4b x86Ê±áÁºñÈÉ®ÂàÜÔºà‰∏çËÉΩË¥™Â§öÔºâÔºåÂØπ‰∫éARM‰ª•ÂèäMIPSÊû∂ÊûÑÂæÖ‰ª•ÂêéËøõÈò∂ÂêéÂÜçËøõË°åÂ≠¶‰π†</p>
<h1 id="part2-Êåá‰ª§ËÆ≤Ëß£"><a class="markdownIt-Anchor" href="#part2-Êåá‰ª§ËÆ≤Ëß£"></a> Part.2 Êåá‰ª§ËÆ≤Ëß£</h1>
<h2 id="chapter1-cpu"><a class="markdownIt-Anchor" href="#chapter1-cpu"></a> Chapter1 CPU</h2>
<p>**Êåá‰ª§Á†ÅÔºö**CPUÂèóÁêÜÁöÑÂ∫ïÂ±ÇÂëΩ‰ª§„ÄÇÂÖ∏ÂûãÁöÑÂ∫ïÂ±ÇÂëΩ‰ª§ÊúâÔºöÂ∞ÜÊï∞ÊçÆÂú®ÂØÑÂ≠òÂô®Èó¥ËΩ¨Áßª„ÄÅÊìç‰ΩúÂÜÖÂ≠ò„ÄÅËÆ°ÁÆóËøêÁÆóÁ≠âÊåá‰ª§„ÄÇÊØèÁ±ªCPUÈÉΩÊúâËá™Â∑±ÁöÑÊåá‰ª§ÈõÜÊû∂ÊûÑÔºàInstruction Set ArchitectureÔºåISAÔºâ„ÄÇ</p>
<p>**Êú∫Âô®Á†ÅÔºö**ÂèëÈÄÅÁªôCPUÁöÑÁ®ãÂ∫è‰ª£Á†Å„ÄÇ‰∏ÄÊù°Êåá‰ª§ÈÄöÂ∏∏Ë¢´Â∞ÅË£Ö‰∏∫Ëã•Âπ≤Â≠óËäÇ„ÄÇ</p>
<p>**Ê±áÁºñËØ≠Ë®ÄÔºö**‰∏∫‰∫ÜËÆ©Á®ãÂ∫èÂëòÂ∞ëÈïøÁôΩÂ§¥ÂèëËÄåÂàõÈÄ†Âá∫Êù•ÁöÑ„ÄÅÊòìËØªÊòìËÆ∞ÁöÑ‰ª£Á†ÅÔºåÂÆÉÊúâÂæàÂ§öÁ±ª‰ººÂÆèÁöÑÊâ©Â±ïÂäüËÉΩ„ÄÇ</p>
<p>**CPUÂØÑÂ≠òÂô®Ôºö**ÊØèÁßçCPUÈÉΩÊúâÂÖ∂Âõ∫ÂÆöÁöÑÈÄöÁî®ÂØÑÂ≠òÂô®ÔºàGPRÔºâ„ÄÇx86 CPUÈáå‰∏ÄËà¨Êúâ8‰∏™GPRÔºåx64ÈáåÂæÄÂæÄÊúâ16‰∏™GPRÔºåËÄåARMÈáåÂàôÈÄöÂ∏∏Êúâ16‰∏™GPR„ÄÇÊÇ®ÂèØ‰ª•ËÆ§‰∏∫CPUÂØÑÂ≠òÂô®ÊòØ‰∏ÄÁßçÂ≠òÂÇ®ÂçïÂÖÉÔºåÂÆÉËÉΩÂ§üÊó†Â∑ÆÂà´Âú∞Â≠òÂÇ®ÊâÄÊúâÁ±ªÂûãÁöÑ‰∏¥Êó∂ÂèòÈáè„ÄÇÂÅáÂ¶ÇÊÇ®‰ΩøÁî®‰∏ÄÁßçÈ´òÁ∫ßÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºå‰∏î‰ªÖ‰ºö‰ΩøÁî®Âà∞8‰∏™32‰ΩçÂèòÈáèÔºåÈÇ£‰πàÂÖâCPUËá™Â∏¶ÁöÑÂØÑÂ≠òÂô®Â∞±ËÉΩÂÆåÊàê‰∏çÂ∞ë‰ªªÂä°‰∫ÜÔºÅ</p>
<p><strong>Êåá‰ª§ÈõÜÊû∂ÊûÑ</strong></p>
<p>ÊúÄÂ∏∏ËßÅÁöÑ‰∏âÁßç</p>
<ul>
<li>
<p>ARMÊåá‰ª§ÈõÜÂàÜ‰∏∫3Á±ªÔºöARMÊ®°ÂºèÊåá‰ª§ÈõÜ„ÄÅThumbÊ®°ÂºèÊåá‰ª§ÈõÜÔºàÂåÖÊã¨Thumb-2ÔºâÂíåARM64ÁöÑÊåá‰ª§ÈõÜ„ÄÇÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºö‰∏çÂêåÁöÑÊåá‰ª§ÈõÜÂàÜÂà´</p>
<p>Â±û‰∫é‰∏çÂêåÁöÑÊåá‰ª§ÈõÜÊû∂ÊûÑÔºõ‰∏Ä‰∏™Êåá‰ª§ÈõÜÁªùÈùûÂè¶‰∏Ä‰∏™Êåá‰ª§ÈõÜÁöÑÂèòÁßç„ÄÇ</p>
</li>
<li>
<p>x86Êåá‰ª§ÈõÜ ÂêÑopcodeÔºàÊ±áÁºñÊåá‰ª§ÂØπÂ∫îÁöÑÊú∫Âô®Á†ÅÔºâÁöÑÈïøÂ∫¶‰∏çÂ∞ΩÁõ∏Âêå</p>
</li>
<li>
<p>MIPSÊåá‰ª§ÈõÜ Â§öÊï∞ÈÉΩ‰ΩøÁî®‰∫ÜÂõ∫ÂÆöÈïøÂ∫¶ÁöÑ32‰Ωçopcode</p>
</li>
</ul>
<p><strong>Ê±áÁºñËØ≠Ë®Ä</strong>Â≠òÂú®‰∏§Áßç‰∏ªÊµÅËØ≠‰ΩìÔºåÂç≥<strong>IntelËØ≠‰Ωì</strong>Âíå<strong>AT&amp;TËØ≠‰Ωì</strong></p>
<h2 id="chap2-ÊúÄÁÆÄÂáΩÊï∞"><a class="markdownIt-Anchor" href="#chap2-ÊúÄÁÆÄÂáΩÊï∞"></a> Chap2 ÊúÄÁÆÄÂáΩÊï∞</h2>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">f:
	mov eax,123
	ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Ëøô‰∏™ÂáΩÊï∞‰ªÖÁî±‰∏§Êù°Êåá‰ª§ÊûÑÊàêÔºöÁ¨¨‰∏ÄÊù°Êåá‰ª§ÊääÊï∞ÂÄº123Â≠òÊîæÂú®EAXÂØÑÂ≠òÂô®ÈáåÔºõÊ†πÊçÆÂáΩÊï∞Ë∞ÉÁî®Á∫¶ÂÆö,ÂêéÈù¢‰∏ÄÊù°Êåá‰ª§‰ºöÊääEAXÁöÑÂÄºÂΩì‰ΩúËøîÂõûÂÄº‰º†ÈÄíÁªôË∞ÉÁî®ËÄÖÂáΩÊï∞ÔºåËÄåË∞ÉÁî®ËÄÖÂáΩÊï∞ÔºàcallerÔºâ‰ºö‰ªéEAXÂØÑÂ≠òÂô®ÈáåÂèñÂÄºÔºåÊääÂÆÉÂΩì‰ΩúËøîÂõûÁªìÊûú„ÄÇ</p>
<h2 id="chap3-helloworld"><a class="markdownIt-Anchor" href="#chap3-helloworld"></a> Chap3 Hello,World!</h2>
<h3 id="msvs"><a class="markdownIt-Anchor" href="#msvs"></a> msvs</h3>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"hello,world!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Áî®MSVS<code>cl 1.cpp /Fa1.asm</code>ÁîüÊàê<code>1.asm</code></p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">CONST   SEGMENT
$SG3830 DB       &#39;hello, world&#39;, 0AH, 00H
CONST   ENDS
PUBLIC  _main
EXTRN   _printf:PROC
; Function compile flags: &#x2F;Odtp
_TEXT   SEGMENT
_main   PROC
        push    ebp
        mov     ebp, esp
        push    OFFSET $SG3830
        call    _printf
        add     esp, 4
        xor     eax, eax
        pop     ebp
        ret     0
_main   ENDP
_TEXT   ENDS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÁîüÊàê<code>1.asm</code>ÂêéÔºåÁºñËØëÂô®‰ºöÁîüÊàê<code>1.obj</code>ÁÑ∂ÂêéÂÜçÈìæÊé•‰∏∫<code>1.exe</code></p>
<p>ÂØπËøôÊÆµÊ±áÁºñÁöÑËß£ËØª</p>
<ul>
<li>
<p>Êñá‰ª∂ÂàÜ‰∏∫‰∏§‰∏™‰ª£Á†ÅÊÆµÔºåÂç≥CONSTÂíå_TEXTÊÆµÔºåÂÆÉ‰ª¨ÂàÜÂà´‰ª£Ë°®Êï∞ÊçÆÊÆµÂíå‰ª£Á†ÅÊÆµ„ÄÇ</p>
</li>
<li>
<p>Â≠óÁ¨¶‰∏≤Â∏∏Èáè‚ÄúhelloÔºåworld‚ÄùÂàÜÈÖç‰∫Ü‰∏Ä‰∏™ÊåáÈíàÔºàconst char[]ÔºâÔºåÂè™ÊòØÂú®‰ª£Á†Å‰∏≠Ëøô‰∏™ÊåáÈíàÁöÑÂêçÁß∞Âπ∂‰∏çÊòéÊòæ</p>
</li>
<li>
<p>ÁºñËØëÂô®ËøõË°å‰∫ÜËá™Â∑±ÁöÑÂ§ÑÁêÜÔºåÂπ∂Âú®ÂÜÖÈÉ®ÊääÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÂëΩÂêç‰∏∫$SG3830,<code>0AH</code>ÊòØÊç¢Ë°åÁ¨¶</p>
<p>ÂèØ‰ª•ÂèëÁé∞Âú®Â≠óÁ¨¶‰∏≤Â∏∏ÈáèÂ∞æÈÉ®Ê∑ªÂä†‰∫Ü<code>00H</code>Ëøô‰∏™ÊòØÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÁöÑÁªìÊùüÊ†áÂøó,ÁºñËØëÂô®Ê∑ªÂä†ÁöÑ</p>
</li>
<li>
<p>Âú®‰ª£Á†ÅÊÆµ<code>_TEXT</code>Âè™Êúâ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂç≥<code>main()</code>,ÂÖ∂‰∏≠<code>PROC</code>ÊòØ<code>Procdure</code>ÁöÑÁº©ÂÜôÔºåË°®Á§∫Á®ãÂ∫èÁöÑÂºÄÂßã,‰∏é<code>ENDP</code>ÈÖçÂØπ‰ΩøÁî®</p>
</li>
<li>
<p>‰∏ªÂáΩÊï∞ÁöÑÂáΩÊï∞‰ΩìÊúâÊ†áÂøóÊÄßÁöÑÂáΩÊï∞Â∫èË®ÄÔºàfunction prologueÔºâ</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">push ebp        ; ‰øùÂ≠òË∞ÉÁî®ËÄÖÁöÑÊ†àÂ∏ßÊåáÈíà
mov ebp, esp    ; Âª∫Á´ãÂΩìÂâçÂáΩÊï∞ÁöÑÊ†àÂ∏ßÊåáÈíà
sub esp, N      ; ‰∏∫Â±ÄÈÉ®ÂèòÈáèÂàÜÈÖçÁ©∫Èó¥ÔºàN ÊòØÈúÄË¶ÅÂàÜÈÖçÁöÑÂ≠óËäÇÊï∞Ôºâ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>‰ª•ÂèäÂáΩÊï∞Â∞æÂ£∞Ôºàfunction epilogueÔºâ</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">mov esp, ebp    ; ÊÅ¢Â§çÊ†àÊåáÈíà
pop ebp         ; ÊÅ¢Â§çË∞ÉÁî®ËÄÖÁöÑÊ†àÂ∏ßÊåáÈíà
ret             ; ËøîÂõûÂà∞Ë∞ÉÁî®ËÄÖ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>ÂÆûÈôÖ‰∏äÊâÄÊúâÁöÑÂáΩÊï∞ÈÉΩÊúâËøôÊ†∑ÁöÑÂ∫èË®ÄÂíåÂ∞æÂ£∞„ÄÇ</p>
</li>
<li>
<p>Âú®ÂáΩÊï∞Â∫èË®Ä‰πãÂêéÔºåÁúãÂà∞Ë∞ÉÁî®<code>printf()</code>ÁöÑÊåá‰ª§<code>CALL _printf</code></p>
<p>ÈÄöËøá<code>PUSH</code>Êåá‰ª§ÔºåÁ®ãÂ∫èÊääÂ≠óÁ¨¶‰∏≤ÁöÑÊåáÈíàÊé®ÈÄÅÂÖ•Ê†à„ÄÇËøôÊ†∑Ôºå<code>printf()</code>ÂáΩÊï∞Â∞±ÂèØ‰ª•Ë∞ÉÁî®Ê†àÈáåÁöÑÊåáÈíàÔºåÂç≥Â≠óÁ¨¶‰∏≤<code>‚Äúhello, world!‚Äù</code>ÁöÑÂú∞ÂùÄ„ÄÇ</p>
</li>
<li>
<p>Âú®<code>printf()</code>ÂáΩÊï∞ÁªìÊùü‰ª•ÂêéÔºåÁ®ãÂ∫èÁöÑÊéßÂà∂ÊµÅ‰ºöËøîÂõûÂà∞<code>main()</code>ÂáΩÊï∞‰πã‰∏≠„ÄÇÊ≠§Êó∂ÔºåÂ≠óÁ¨¶‰∏≤Âú∞ÂùÄÔºàÂç≥ÊåáÈíàÔºâ‰ªçÊÆãÁïôÂú®Êï∞ÊçÆÊ†à‰πã‰∏≠„ÄÇËøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅË∞ÉÊï¥Ê†àÊåáÈíàÔºàESPÂØÑÂ≠òÂô®ÈáåÁöÑÂÄºÔºâÊù•ÈáäÊîæËøô‰∏™ÊåáÈíà„ÄÇ</p>
</li>
<li>
<p>‰∏ã‰∏ÄÊù°ËØ≠Âè•ÊòØ<code>‚Äúadd ESPÔºå4‚Äù</code>ÔºåÊääESPÂØÑÂ≠òÂô®ÔºàÊ†àÊåáÈíà/Stack PointerÔºâÈáåÁöÑÊï∞ÂÄºÂä†4„ÄÇ(Âú®32‰ΩçÁ≥ªÁªü‰∏≠ÔºåÊåáÈíàÁöÑÂ§ßÂ∞èÂç†4Â≠óËäÇÔºåÂêåÁêÜÂú®64‰Ωç‰∏≠ÔºåÂ∞±Ë¶Å+8)</p>
<p>ËøôÊù°Êåá‰ª§ÂèØ‰ª•ÁêÜËß£‰∏∫‚ÄúPOPÊüêÂØÑÂ≠òÂô®‚Äù„ÄÇÂè™ÊòØÊú¨‰æãÁöÑÊåá‰ª§Áõ¥Êé•ËàçÂºÉ‰∫ÜÊ†àÈáåÁöÑÊï∞ÊçÆËÄåPOPÊåá‰ª§ËøòË¶ÅÊääÂØÑÂ≠òÂô®ÈáåÁöÑÂÄºÂ≠òÂÇ®Âà∞Êó¢ÂÆöÂØÑÂ≠òÂô®</p>
<p>Êüê‰∫õÁºñËØëÂô®ÔºàÂ¶ÇIntel C<ins>ÁºñËæëÂô®Ôºâ‰∏ç‰ºö‰ΩøÁî®ADDÊåá‰ª§Êù•ÈáäÊîæÊï∞ÊçÆÊ†àÔºå<strong>ÂÆÉ‰ª¨ÂèØËÉΩ‰ºöÁî®POP ECXÊåá‰ª§</strong>„ÄÇ‰æãÂ¶ÇÔºåOracle RDBMSÔºàÁî±Intel C</ins>ÁºñËØëÂô®ÁºñËØëÔºâÂ∞±‰ºöÁî®POP ECXÊåá‰ª§ÔºåËÄå‰∏ç‰ºöÁî®ADDÊåá‰ª§„ÄÇËôΩÁÑ∂POP ECXÂëΩ‰ª§Á°ÆÂÆû‰ºö‰øÆÊîπECXÂØÑÂ≠òÂô®ÁöÑÂÄºÔºå‰ΩÜÊòØÂÆÉ‰πüÂêåÊ†∑ÈáäÊîæ‰∫ÜÊ†àÁ©∫Èó¥„ÄÇ</p>
<p>Intel C++ÁºñËØëÂô®‰ΩøÁî®POP ECXÊåá‰ª§ÁöÑÂè¶Â§ñ‰∏Ä‰∏™ÁêÜÁî±Â∞±ÊòØÔºå<strong>POP ECXÂØπÂ∫îÁöÑOPCODEÔºà1Â≠óËäÇÔºâÊØîADD ESPÁöÑOPCODEÔºà3Â≠óËäÇÔºâË¶ÅÁü≠„ÄÇ</strong></p>
</li>
<li>
<p>Âú®‰∏äËø∞Á®ãÂ∫è‰∏≠printf()ÂáΩÊï∞ÁªìÊùü‰πãÂêéÔºåmain()ÂáΩÊï∞‰ºöËøîÂõû0ÔºàÂáΩÊï∞Ê≠£Â∏∏ÈÄÄÂá∫ÁöÑËøîÂõûÁ†ÅÔºâ„ÄÇÂç≥main()ÂáΩÊï∞ÁöÑËøêÁÆóÁªìÊûúÊòØ0„ÄÇËøô‰∏™ËøîÂõûÂÄºÊòØÁî±<strong>Êåá‰ª§<code>‚ÄúXOR EAX, EAX‚Äù</code>ËÆ°ÁÆóÂá∫Êù•ÁöÑ</strong>„ÄÇÁºñËØëÂô®ÈÄöÂ∏∏ÈááÁî®ÂºÇÊàñËøêÁÆóÊåá‰ª§ÔºåËÄå‰∏ç‰ºö‰ΩøÁî®‚ÄúMOV EAXÔºå0‚ÄùÊåá‰ª§„ÄÇ‰∏ªË¶ÅÊòØÂõ†‰∏∫<strong>ÂºÇÊàñËøêÁÆóÁöÑopcodeËæÉÁü≠</strong>Ôºà2Â≠óËäÇ:5Â≠óËäÇÔºâ</p>
</li>
<li>
<p>Ê±áÁºñÂàóË°®‰∏≠ÊúÄÂêéÁöÑÊìç‰ΩúÊåá‰ª§ÊòØRETÔºåÂ∞ÜÊéßÂà∂ÊùÉ‰∫§ÁªôË∞ÉÁî®Á®ãÂ∫è„ÄÇÈÄöÂ∏∏ÂÆÉËµ∑Âà∞ÁöÑ‰ΩúÁî®Â∞±ÊòØÂ∞ÜÊéßÂà∂ÊùÉ‰∫§ÁªôÊìç‰ΩúÁ≥ªÁªüÔºåËøôÈÉ®ÂàÜÂäüËÉΩÁî±C/C++ÁöÑ<code>CRT</code>ÂÆûÁé∞„ÄÇÔºàC RUNTIME LIBRARY)</p>
</li>
</ul>
<h3 id="gcc"><a class="markdownIt-Anchor" href="#gcc"></a> gcc</h3>
<p>Âà©Áî®<code>gcc</code>ÁºñËØëÂô®ÁºñËØë<code>gcc 1.c -o 1</code>ÈááÁî®<code>-S -masm=intel</code>ÁîüÊàêintelËØ≠Ê≥ïÁöÑÊ±áÁºñÂàóË°®Êñá‰ª∂</p>
<p>ÁîüÊàêÂêéÁî®IDAÊâìÂºÄ</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">Main         proc near
var_10       &#x3D; dword ptr -10h

             push    ebp
             mov     ebp, esp
             and     esp, 0FFFFFFF0h
             sub     esp, 10h
             mov     eax, offset aHelloWorld ; &quot;hello, world\n&quot;
             mov     [esp+10h+var_10], eax
             call    _printf
             mov     eax, 0
             leave
             retn
main         endp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Ê±áÁºñËß£ËØª</p>
<ul>
<li>‰∏éMSVCÁîüÊàêÁöÑÁªìÊûúÂü∫Êú¨Áõ∏Âêå„ÄÇÂÆÉÈ¶ñÂÖàÊää‚Äúhello, world‚ÄùÂ≠óÁ¨¶‰∏≤Âú®Êï∞ÊçÆÊÆµÁöÑÂú∞ÂùÄÔºàÊåáÈíàÔºâÂ≠òÂÇ®Âà∞EAXÂØÑÂ≠òÂô®ÈáåÔºåÁÑ∂ÂêéÂÜçÊääÂÆÉÂ≠òÂÇ®Âú®Êï∞ÊçÆÊ†àÈáå„ÄÇ</li>
<li>ÂºÄÂ§¥ÁöÑ<code>and esp,0FFFFFFF0h</code>Âêë16Â≠óËäÇËæπÁïåÂØπÈΩêÔºàÊàê‰∏∫16ÁöÑÊï¥Êï∞ÂÄçÔºâÔºåÂ±û‰∫éÂàùÂßãÂåñÁöÑÊåá‰ª§„ÄÇÂ¶ÇÊûúÂú∞ÂùÄ‰ΩçÊ≤°ÊúâÂØπÈΩêÔºåÈÇ£‰πàCPUÂèØËÉΩÈúÄË¶ÅËÆøÈóÆ‰∏§Ê¨°ÂÜÖÂ≠òÊâçËÉΩËé∑ÂæóÊ†àÂÜÖÊï∞ÊçÆ„ÄÇËôΩÁÑ∂Âú®8Â≠óËäÇËæπÁïåÂ§ÑÂØπÈΩêÂ∞±ÂèØ‰ª•Êª°Ë∂≥32‰Ωçx86 CPUÂíå64‰Ωçx64 CPUÁöÑË¶ÅÊ±ÇÔºå‰ΩÜÊòØ‰∏ªÊµÅÁºñËØëÂô®ÁöÑÁºñËØëËßÑÂàôËßÑÂÆö‚ÄúÁ®ãÂ∫èËÆøÈóÆÁöÑÂú∞ÂùÄÂøÖÈ°ªÂêë16Â≠óËäÇÂØπÈΩêÔºàË¢´16Êï¥Èô§Ôºâ,ÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊèêÈ´òÊïàÁéá</li>
<li><code>‚ÄúSUB ESPÔºå10h‚Äù</code>Â∞ÜÂú®Ê†à‰∏≠ÂàÜÈÖç0x10 bytesÔºåÂç≥16Â≠óËäÇ„ÄÇÊàë‰ª¨Âú®ÂêéÊñáÁúãÂà∞ÔºåÁ®ãÂ∫èÂè™‰ºöÁî®Âà∞4Â≠óËäÇÁ©∫Èó¥„ÄÇ‰ΩÜÊòØÂõ†‰∏∫ÁºñËØëÂô®ÂØπÊ†àÂú∞ÂùÄÔºàESPÔºâËøõË°å‰∫Ü16Â≠óËäÇÂØπÈΩêÔºåÊâÄ‰ª•ÊØèÊ¨°ÈÉΩ‰ºöÂàÜÈÖç16Â≠óËäÇÁöÑÁ©∫Èó¥„ÄÇ</li>
<li>ËÄåÂêéÔºåÁ®ãÂ∫èÂ∞ÜÂ≠óÁ¨¶‰∏≤Âú∞ÂùÄÔºàÊåáÈíàÁöÑÂÄºÔºâÁõ¥Êé•ÂÜôÂÖ•Âà∞Êï∞ÊçÆÊ†à„ÄÇÊ≠§Â§ÑÔºåGCC‰ΩøÁî®ÁöÑÊòØMOVÊåá‰ª§ÔºõËÄåMSVCÁîüÊàêÁöÑÊòØPUSHÊåá‰ª§„ÄÇÂÖ∂‰∏≠var_10ÊòØÂ±ÄÈÉ®ÂèòÈáèÔºåÁî®Êù•ÂêëÂêéÈù¢ÁöÑprintf()ÂáΩÊï∞‰º†ÈÄíÂèÇÊï∞„ÄÇ</li>
<li>GCCÂíåMSVC‰∏çÂêåÔºåÈô§Èùû‰∫∫Â∑•ÊåáÂÆö‰ºòÂåñÈÄâÈ°πÔºåÂê¶ÂàôÂÆÉ‰ºöÁîüÊàê‰∏éÊ∫ê‰ª£Á†ÅÁõ¥Êé•ÂØπÂ∫îÁöÑ‚ÄúMOV EAX, 0‚ÄùÊåá‰ª§„ÄÇ‰ΩÜÊòØÔºåÊàë‰ª¨Â∑≤ÁªèÁü•ÈÅìMOVÊåá‰ª§ÁöÑopcodeËÇØÂÆöË¶ÅÊØîXORÊåá‰ª§ÁöÑopcodeÈïø„ÄÇ</li>
<li>LEAVEÊåá‰ª§ÔºåÁÆÄÂåñÂáΩÊï∞Â∞æÂ£∞ÔºåÁ≠âÊïà‰∫é<code>‚ÄúMOV ESP, EBP‚Äù</code>Âíå‚Äú<code>POP EBP‚Äù</code>‰∏§Êù°Êåá‰ª§„ÄÇÂèØËßÅÔºåËøô‰∏™Êåá‰ª§Ë∞ÉÊï¥‰∫ÜÊï∞ÊçÆÊ†àÊåáÈíàESPÔºåÂπ∂Â∞ÜEBPÁöÑÊï∞ÂÄºÊÅ¢Â§çÂà∞Ë∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞‰πãÂâçÁöÑÂàùÂßãÁä∂ÊÄÅ„ÄÇ</li>
</ul>
<h3 id="msvs-x86-64"><a class="markdownIt-Anchor" href="#msvs-x86-64"></a> msvs x86-64</h3>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">$SG2989  DB      &#39;hello, world&#39;, 0AH 00H

main     PROC
         sub     rsp, 40
         lea     rcx, OFFSET FLAT:$SG2989
         call    printf
         xor     eax, eax
         add     rsp, 40
         ret     0
main     ENDP<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Âú®x86-64Ê°ÜÊû∂ÁöÑCPUÈáåÔºåÊâÄÊúâÁöÑÁâ©ÁêÜÂØÑÂ≠òÂô®ÈÉΩË¢´Êâ©Â±ï‰∏∫64‰ΩçÂØÑÂ≠òÂô®„ÄÇÂØÑÂ≠òÂô®Âèò‰∏∫rÂ≠óÂºÄÂ§¥</p>
<p>‰∏∫‰∫ÜÂ∞ΩÂèØËÉΩÂÖÖÂàÜÂú∞Âà©Áî®ÂØÑÂ≠òÂô®„ÄÅÂáèÂ∞ëËÆøÈóÆÂÜÖÂ≠òÊï∞ÊçÆÁöÑÊ¨°Êï∞ÔºåÁºñËØëÂô®‰ºöÂÖÖÂàÜÂà©Áî®ÂØÑÂ≠òÂô®‰º†ÈÄíÂáΩÊï∞ÂèÇÊï∞ÔºàËØ∑ÂèÇËßÅ64.3ËäÇÁöÑfastcallÁ∫¶ÂÆöÔºâ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÁºñËØëÂô®‰ºö‰ºòÂÖà‰ΩøÁî®ÂØÑÂ≠òÂô®‰º†ÈÄíÈÉ®ÂàÜÂèÇÊï∞ÔºåÂÜçÂà©Áî®ÂÜÖÂ≠òÔºàÊï∞ÊçÆÊ†àÔºâ‰º†ÈÄíÂÖ∂‰ΩôÁöÑÂèÇÊï∞„ÄÇ<code>Win64ÁöÑÁ®ãÂ∫è</code>Ëøò‰ºö‰ΩøÁî®<code>RCX„ÄÅRDX„ÄÅR8„ÄÅR9</code>Ëøô4‰∏™ÂØÑÂ≠òÂô®Êù•Â≠òÊîæÂáΩÊï∞ÂèÇÊï∞„ÄÇÊàë‰ª¨Á®çÂêéÂ∞±‰ºöÁúãÂà∞ËøôÁßçÊÉÖÂÜµÔºöprintf()‰ΩøÁî®RCXÂØÑÂ≠òÂô®‰º†ÈÄíÂèÇÊï∞ÔºåËÄåÊ≤°ÊúâÂÉè32‰ΩçÁ®ãÂ∫èÈÇ£Ê†∑‰ΩøÁî®Ê†à‰º†ÈÄíÊï∞ÊçÆ„ÄÇ</p>
<p>main()ÂáΩÊï∞ÁöÑËøîÂõûÂÄºÊòØÊï¥Êï∞Á±ªÂûãÁöÑÈõ∂Ôºå‰ΩÜÊòØÂá∫‰∫éÂÖºÂÆπÊÄßÂíåÂèØÁßªÊ§çÊÄßÁöÑËÄÉËôëÔºåCËØ≠Ë®ÄÁöÑÁºñËØëÂô®‰ªçÂ∞Ü‰ΩøÁî®<code>32‰ΩçÁöÑÈõ∂</code>„ÄÇÊç¢ËÄåË®Ä‰πãÔºåÂç≥‰ΩøÊòØ64‰ΩçÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÂú®Á®ãÂ∫èÁªìÊùüÊó∂EAXÁöÑÂÄºÊòØÈõ∂ÔºåËÄåR<code>AXÁöÑÂÄº‰∏ç‰∏ÄÂÆö‰ºöÊòØÈõ∂„ÄÇ</code></p>
<p>Êï∞ÊçÆÊ†àÁöÑÂØπÂ∫îÁ©∫Èó¥Èáå‰ªçÁïôÊúâ40Â≠óËäÇÁöÑÊï∞ÊçÆ„ÄÇËøôÈÉ®ÂàÜÊï∞ÊçÆÁ©∫Èó¥Êúâ‰∏™‰∏ìÁî®ÁöÑÂêçËØçÔºåÂç≥<code>Èò¥ÂΩ±Á©∫Èó¥</code>Ôºàshadow spaceÔºâ</p>
<h3 id="gcc-x86-64"><a class="markdownIt-Anchor" href="#gcc-x86-64"></a> gcc x86-64</h3>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">.string &quot;hello, world\n&quot;
main:
         sub      rsp, 8
         mov      edi, OFFSET FLAT:.LC0 ; &quot;hello, world&quot;
         xor      eax, eax  ; number of vector registers passed
         call     printf
         xor      eax, eax
         add      rsp, 8
         ret<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>Linux„ÄÅBSDÂíåMac OS XÁ≥ªÁªü‰∏≠ÁöÑÂ∫îÁî®Á®ãÂ∫è</strong>Ôºå‰ºö‰ºòÂÖà‰ΩøÁî®<code>RDI„ÄÅRSI„ÄÅRDX„ÄÅRCX„ÄÅR8„ÄÅR9Ëøô6‰∏™ÂØÑÂ≠òÂô®‰º†ÈÄíÂáΩÊï∞ÊâÄÈúÄÁöÑÂ§¥6‰∏™ÂèÇÊï∞</code>ÔºåÁÑ∂Âêé‰ΩøÁî®Êï∞ÊçÆÊ†à‰º†ÈÄíÂÖ∂‰ΩôÁöÑÂèÇÊï∞„ÄÇ</p>
<p>‰ΩøÁî®‰∫Ü<code>EDI</code>ÂØÑÂ≠òÂô®Êù•‰º†ÈÄíÂ≠óÁ¨¶‰∏≤ÊåáÈíàÔºå‰∏∫‰ªÄ‰πà‰∏çÁî®<code>RDI</code></p>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå64‰ΩçÊ±áÁºñÊåá‰ª§MOVÂú®ÂÜôÂÖ•R-ÂØÑÂ≠òÂô®ÁöÑ‰Ωé32‰ΩçÂú∞ÂùÄ‰ΩçÁöÑÊó∂ÂÄôÔºåÂç≥ÂØπE-ÂØÑÂ≠òÂô®ËøõË°åÂÜôÊìç‰ΩúÁöÑÊó∂ÂÄôÔºå‰ºöÂêåÊó∂Ê∏ÖÈô§R-ÂØÑÂ≠òÂô®‰∏≠ÁöÑÈ´ò32‰ΩçÂú∞ÂùÄ‰Ωç„ÄÇÊâÄ‰ª•, ‚ÄúMOV EAX, 011223344h‚ÄùËÉΩÂ§üÂØπRAXÂØÑÂ≠òÂô®ËøõË°åÊ≠£Á°ÆÁöÑËµãÂÄºÊìç‰ΩúÔºåÂõ†‰∏∫ËØ•Êåá‰ª§‰ºöÊ∏ÖÈô§ÔºàÁΩÆÈõ∂ÔºâÈ´òÂú∞ÂùÄ‰ΩçÁöÑÂÜÖÂÆπ„ÄÇ</p>
<p>‰ΩøÁî®<code>EDI</code>ÊòØÂõ†‰∏∫ÂèØ‰ª•‰Ωø<code>opcode</code>Áî±7‰∏™Â≠óËäÇÂáèÂ∞ëÂà∞5‰∏™Â≠óËäÇ,gcc‰ºòÂåñ</p>
<p><code>gcc</code>ÁöÑ‰ºòÂåñÊúâÂæàÂ§öÁâπÊÄßÔºå‰æãÂ¶Ç:ÂÆÉÂèØËÉΩ‰ºöÊääÂ≠óÁ¨¶‰∏≤ÊãÜÂá∫Êù•ÂçïÁã¨‰ΩøÁî®„ÄÇ‰ª•ËäÇÁúÅÂÜÖÂ≠ò</p>
<h3 id="problems"><a class="markdownIt-Anchor" href="#problems"></a> Problems</h3>
<p>1.Á≠î:Ë∞ÉÁî®‰∫Ü<code>MessagBeep</code>Ëøô‰∏™ÂáΩÊï∞ÔºåÂèÇÊï∞‰∏∫0xFFFFFFFF</p>
<h2 id="chap4-ÂáΩÊï∞Â∫èË®ÄÂíåÂáΩÊï∞Â∞æÂ£∞"><a class="markdownIt-Anchor" href="#chap4-ÂáΩÊï∞Â∫èË®ÄÂíåÂáΩÊï∞Â∞æÂ£∞"></a> Chap4 ÂáΩÊï∞Â∫èË®ÄÂíåÂáΩÊï∞Â∞æÂ£∞</h2>
<p>Áï•</p>
<h2 id="chap5-Ê†à"><a class="markdownIt-Anchor" href="#chap5-Ê†à"></a> Chap5 Ê†à</h2>
<ul>
<li>
<p>Ê†àÂ∞±ÊòØCPUÂØÑÂ≠òÂô®ÈáåÁöÑÊüê‰∏™ÊåáÈíàÊâÄÊåáÂêëÁöÑ‰∏ÄÁâáÂÜÖÂ≠òÂå∫Âüü„ÄÇËøôÈáåÊâÄËØ¥ÁöÑ‚ÄúÊüê‰∏™ÊåáÈíà‚ÄùÈÄöÂ∏∏‰Ωç‰∫éx86/x64Âπ≥Âè∞ÁöÑESPÂØÑÂ≠òÂô®/RSPÂØÑÂ≠òÂô®Ôºå‰ª•ÂèäARMÂπ≥Âè∞ÁöÑSPÂØÑÂ≠òÂô®„ÄÇ</p>
</li>
<li>
<p>Êìç‰ΩúÊ†àÁöÑÊúÄÂ∏∏ËßÅÁöÑÊåá‰ª§ÊòØPUSHÂíåPOPÔºå<code>PUSH</code>Êåá‰ª§‰ºöÂØπESP/RSP/SPÂØÑÂ≠òÂô®ÁöÑÂÄºËøõË°åÂáèÊ≥ïËøêÁÆóÔºå‰Ωø‰πãÂáèÂéª4Ôºà32‰ΩçÔºâÊàñ8Ôºà64‰ΩçÔºâÔºåÁÑ∂ÂêéÂ∞ÜÊìç‰ΩúÊï∞ÂÜôÂà∞‰∏äËø∞ÂØÑÂ≠òÂô®ÈáåÁöÑÊåáÈíàÊâÄÊåáÂêëÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ<code>POP</code>Êåá‰ª§ÊòØPUSHÊåá‰ª§ÁöÑÈÄÜÊìç‰ΩúÔºöÂÆÉÂÖà‰ªéÊ†àÊåáÈíàÔºàStack PointerÔºå‰∏äÈù¢‰∏â‰∏™ÂØÑÂ≠òÂô®‰πã‰∏ÄÔºâÊåáÂêëÁöÑÂÜÖÂ≠ò‰∏≠ËØªÂèñÊï∞ÊçÆÔºåÁî®‰ª•Â§áÁî®ÔºàÈÄöÂ∏∏ÊòØÂÜôÂà∞ÂÖ∂‰ªñÂØÑÂ≠òÂô®ÈáåÔºâÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÊ†àÊåáÈíàÁöÑÊï∞ÂÄºÂä†‰∏ä4Êàñ8„ÄÇ</p>
</li>
<li>
<p>Ê†àÊòØÈÄÜÂ¢ûÈïøÁöÑÔºåÂç≥‰ªéÈ´òÂú∞ÂùÄÂêë‰ΩéÂú∞ÂùÄÂ¢ûÈïø</p>
</li>
</ul>
<hr />
<h3 id="Ê†àÁöÑÁî®ÈÄî"><a class="markdownIt-Anchor" href="#Ê†àÁöÑÁî®ÈÄî"></a> Ê†àÁöÑÁî®ÈÄî</h3>
<ul>
<li>
<p>‰øùÂ≠òÂáΩÊï∞ÁöÑËøîÂõûÂú∞ÂùÄ</p>
<p><code>call</code>Êåá‰ª§Á≠â‰ª∑‰∫é<code>push ËøîÂõûÂú∞ÂùÄ</code>‰∏é<code>jmp ÂáΩÊï∞Âú∞ÂùÄ</code></p>
<p><code>ret</code>Êåá‰ª§‰ªéÊ†à‰∏≠ËØªÂèñËøîÂõûÂú∞ÂùÄÔºåÁÑ∂ÂêéË∑≥ËΩ¨Âà∞Ëøô‰∏™Âú∞ÂùÄÔºåÁ≠â‰ª∑‰∫é<code>pop ËøîÂõûÂú∞ÂùÄ</code>‰∏é<code>jmp ËøîÂõûÂú∞ÂùÄ</code></p>
<p>Áî±Ê≠§ÂèØÂÆûÁé∞ÂáΩÊï∞ÁöÑÈÄíÂΩíË∞ÉÁî®</p>
</li>
<li>
<p>ÂèÇÊï∞‰º†ÈÄí</p>
<p>ÊúÄÂ∏∏Áî®ÁöÑÂèÇÊï∞‰º†ÈÄíÁ∫¶ÂÆöÊòØ<code>cdecl</code></p>
<p>‰ª•‰∏ã‰∏∫ÂÖ∂‰∏ªË¶ÅËßÑÂàô</p>
<ol>
<li><strong>ÂèÇÊï∞‰ªéÂè≥Âà∞Â∑¶ÂéãÂÖ•Ê†à</strong></li>
<li><strong>Ë∞ÉÁî®ËÄÖË¥üË¥£Ê∏ÖÁêÜÊ†à</strong>ÔºöÂáΩÊï∞Ë∞ÉÁî®ÁªìÊùüÂêéÔºåË∞ÉÁî®ËÄÖÈúÄË¶ÅË¥üË¥£‰ªéÊ†à‰∏≠ÂºπÂá∫‰º†ÈÄíÁªôÂáΩÊï∞ÁöÑÊâÄÊúâÂèÇÊï∞„ÄÇËøôÊÑèÂë≥ÁùÄÁºñËØëÂô®‰ºöÂú®Ë∞ÉÁî®ÂáΩÊï∞‰πãÂêéÁîüÊàêÁõ∏Â∫îÁöÑ‰ª£Á†ÅÊù•Ë∞ÉÊï¥Â†ÜÊ†àÊåáÈíàÔºåÊÅ¢Â§çË∞ÉÁî®ÂâçÁöÑÁä∂ÊÄÅ„ÄÇ</li>
<li><strong>ÂèØÂèòÂèÇÊï∞ÂàóË°®ÊîØÊåÅ</strong>Ôºöcdecl ÊîØÊåÅÂáΩÊï∞ÂÖ∑ÊúâÂèØÂèòÊï∞ÈáèÁöÑÂèÇÊï∞ÔºàÂ¶Ç printf ÂáΩÊï∞ÔºâÔºåËøôÊòØÈÄöËøáÂú®ÂèÇÊï∞ÂàóË°®‰∏≠‰ΩøÁî®ÁúÅÁï•Âè∑Ôºà‚Ä¶ÔºâÊù•Ë°®Á§∫ÁöÑ„ÄÇ</li>
<li><strong>ËøîÂõûÂÄºÈÄöÂ∏∏Âú®EAXÂØÑÂ≠òÂô®‰∏≠</strong>ÔºàÂØπ‰∫éx86Êû∂ÊûÑÔºâÔºöÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÂáΩÊï∞ÁöÑËøîÂõûÂÄºÂ¶ÇÊûúÂ§ßÂ∞èÈÄÇÂΩìÔºàÊØîÂ¶ÇÊï¥Êï∞„ÄÅÊåáÈíàÔºâÔºå‰ºöÈÄöËøáEAXÂØÑÂ≠òÂô®ËøîÂõû„ÄÇÂØπ‰∫éÊõ¥Â§ßÁöÑËøîÂõûÁ±ªÂûãÔºåÂèØËÉΩ‰ºöÈÄöËøáÂÖ∂‰ªñÊñπÂºèÔºåÂ¶ÇÈÄöËøáÊåáÈíà‰º†ÈÄí„ÄÇ</li>
</ol>
<p>‰æãÂ¶Ç</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">push arg3
push arg2
push arg1
call f
add esp.12;4*3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Ë¢´Ë∞ÉÁî®ÁöÑÂáΩÊï∞ÂèØ‰ª•ÈÄöËøáÊ†àÊåáÈíàËé∑ÂèñÊâÄÈúÄÂèÇÊï∞</p>
<table>
<thead>
<tr>
<th>ESP</th>
<th>ËøîÂõûÂú∞ÂùÄ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ESP+4</td>
<td>arg1, ÂÆÉÂú®IDAÈáåËÆ∞‰∏∫arg_0</td>
</tr>
<tr>
<td>ESP+8</td>
<td>arg2, ÂÆÉÂú®IDAÈáåËÆ∞‰∏∫arg_4</td>
</tr>
<tr>
<td>ESP+0xC</td>
<td>arg3, ÂÆÉÂú®IDAÈáåËÆ∞‰∏∫arg_8</td>
</tr>
</tbody>
</table>
<p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÁ®ãÂ∫èÂëòÂèØ‰ª•‰ΩøÁî®Ê†àÊù•‰º†ÈÄíÂèÇÊï∞Ôºå‰πüÂèØ‰ª•‰∏ç‰ΩøÁî®Ê†à‰º†ÈÄíÂèÇÊï∞„ÄÇÂèÇÊï∞Â§ÑÁêÜÊñπÈù¢Âπ∂Ê≤°ÊúâÁõ∏ÂÖ≥ÁöÑÁ°¨ÊÄßËßÑÂÆö„ÄÇ‰æãÂ¶Ç‰πüÂèØ‰ª•Áî®ÂØÑÂ≠òÂô®ÊàñËÄÖÂ†Ü‰∏äÂºÄËæüÂÜÖÂ≠òËøõË°å‰º†ÂèÇÔºå‰∏çËøáÂú®x86ËøôÁßçÁ∫¶ÂÆöÂ∑≤ÊòØ‰π†ÊÉØ</p>
<p>Â¶ÇÊûúÂáΩÊï∞ÂèØÂ§ÑÁêÜÁöÑÂèÇÊï∞Êï∞ÈáèÂèØÂèòÔºåÂ∞±ÈúÄË¶ÅÁî®ËØ¥ÊòéÁ¨¶Â¶Ç%dËøõË°åÊ†ºÂºèÂåñËØ¥ÊòéÔºåÊòéÁ°ÆÂèÇÊï∞‰ø°ÊÅØ</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d"</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Ëøô‰∏™ÂëΩ‰ª§‰∏ç‰ªÖ‰ºöËÆ©printf()ÊòæÁ§∫1234ÔºåËÄå‰∏îËøò‰ºöËÆ©ÂÆÉÊòæÁ§∫Êï∞ÊçÆÊ†àÂÜÖ1234‰πãÂêéÁöÑ‰∏§‰∏™Âú∞ÂùÄÁöÑÈöèÊú∫Êï∞„ÄÇ</p>
<p>Áî±Ê≠§ÂèØÁü•ÔºåÂ£∞Êòémain()ÂáΩÊï∞ÁöÑÊñπÊ≥ïÂπ∂‰∏çÊòØÈÇ£‰πàÈáçË¶Å„ÄÇÊàë‰ª¨ÂèØ‰ª•Â∞Ü‰πãÂ£∞Êòé‰∏∫<code>main(),main(int argc, char *argv[])Êàñmain(int argc, char *argv[], char *envp[])</code>,CRT‰∏≠Ë∞ÉÁî®<code>main()</code>Êåá‰ª§Â¶Ç‰∏ã:</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">push envp
push argv
push argc
call main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li>
<p>Â≠òÂÇ®Â±ÄÈÉ®ÂèòÈáè</p>
</li>
<li>
<p>x86.alloca()ÂáΩÊï∞</p>
<p><code>malloc()</code>ÊòØÂú®Â†Ü‰∏äÂàÜÈÖçÂÜÖÂ≠òÔºåËÄå<code>alloc()</code>Áõ¥Êé•‰ΩøÁî®Ê†àÊù•ÂàÜÈÖçÂÜÖÂ≠ò</p>
<p>Áî±‰∫éÂáΩÊï∞Â∞æÂ£∞ÁöÑ‰ª£Á†Å‰ºöËøòÂéü<code>ESP</code>ÁöÑÂÄºÔºå‰∏çÈúÄË¶ÅÁâπÂú∞‰ΩøÁî®<code>free()</code>Êù•ÈáäÊîæÂÜÖÂ≠ò</p>
</li>
<li>
<p>(Win)SEHÁªìÊûÑÂåñÂºÇÂ∏∏Â§ÑÁêÜ</p>
<p>Â¶ÇÊûúÁ®ãÂ∫èÈáåÂ≠òÂú®<code>SEH</code>ËÆ∞ÂΩïÔºåÈÇ£‰πàËÆ∞ÂΩï‰ºö‰øùÂ≠òÂú®Ê†à‰∏≠</p>
</li>
<li>
<p>ÁºìÂÜ≤Âå∫Ê∫¢Âá∫‰øùÊä§</p>
</li>
<li>
<p>ÂÖ∏ÂûãÁöÑÊ†àÁöÑÂÜÖÂ≠òÂ≠òÂÇ®Ê†ºÂºè</p>
<p>Âú®32‰ΩçÁ≥ªÁªü‰∏≠ÔºåÂú®Á®ãÂ∫èË∞ÉÁî®ÂáΩÊï∞‰πãÂêé„ÄÅÊâßË°åÂÆÉÁöÑÁ¨¨‰∏ÄÊù°Êåá‰ª§‰πãÂâçÔºåÊ†àÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂ≠òÂÇ®Ê†ºÂºè‰∏ÄËà¨Â¶Ç‰∏ãË°®ÊâÄÁ§∫„ÄÇ</p>
<table>
<thead>
<tr>
<th>‚Ä¶</th>
<th>‚Ä¶‚Ä¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>ESP-0xC</td>
<td>Á¨¨2‰∏™Â±ÄÈÉ®ÂèòÈáèÔºåÂú®IDAÈáåËÆ∞‰∏∫var_8</td>
</tr>
<tr>
<td>ESP-8</td>
<td>Á¨¨1‰∏™Â±ÄÈÉ®ÂèòÈáèÔºåÂú®IDAÈáåËÆ∞‰∏∫var_4</td>
</tr>
<tr>
<td>ESP-4</td>
<td>‰øùÂ≠òÁöÑEBPÂÄº</td>
</tr>
<tr>
<td>ESP</td>
<td>ËøîÂõûÂú∞ÂùÄ</td>
</tr>
<tr>
<td>ESP+4</td>
<td>arg1, Âú®IDAÈáåËÆ∞‰∏∫arg_0</td>
</tr>
<tr>
<td>ESP+8</td>
<td>arg2, Âú®IDAÈáåËÆ∞‰∏∫arg_4</td>
</tr>
<tr>
<td>ESP+0xC</td>
<td>arg3, Âú®IDAÈáåËÆ∞‰∏∫arg_8</td>
</tr>
<tr>
<td>‚Ä¶</td>
<td>‚Ä¶‚Ä¶</td>
</tr>
</tbody>
</table>
</li>
</ul>
<hr />
<h3 id="Ê†àÁöÑÂô™Èü≥"><a class="markdownIt-Anchor" href="#Ê†àÁöÑÂô™Èü≥"></a> Ê†àÁöÑÂô™Èü≥</h3>
<p>ÂáΩÊï∞ÈÄÄÂá∫‰ª•Âêé,ÂéüÊúâÊ†àÁöÑÁ©∫Èó¥ÈáåÁöÑÂ±ÄÈÉ®ÂèòÈáè‰∏ç‰ºöË¢´Ëá™Âä®Ê∏ÖÈô§Ôºå‰ªçÁÑ∂‰øùÁïôÂ∞±Êàê‰∫ÜÊ†à‰∏≠ÁöÑËÑèÊï∞ÊçÆ</p>
<p>‰æãÂ¶Ç</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>

<span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
        <span class="token function">printf</span> <span class="token punctuation">(</span><span class="token string">"%d, %d, %d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">&#123;</span>
        <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Êàë‰ª¨‰ºöÂèëÁé∞ÔºåÊ≤°ÊúâÂØπf2ÁöÑÂèòÈáèÂàùÂßãÂåñÔºå‰ªçÁÑ∂ÊâìÂç∞ÁöÑÊòØ 1 2 3</p>
<p>ÂèØ‰ª•Á†îÁ©∂‰∏Ä‰∏ãÊ±áÁºñ‰ª£Á†Å,Âà©Áî®MSVSÁºñËØëÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ã</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">$SG2752 DB      &#39;%d, %d, %d&#39;, 0aH, 00H

_c$ &#x3D; -12       ; size &#x3D; 4
_b$ &#x3D; -8        ; size &#x3D; 4
_a$ &#x3D; -4        ; size &#x3D; 4
_f1    PROC
       push     ebp
       mov      ebp, esp
       sub      esp, 12
       mov      DWORD PTR _a$[ebp], 1
       mov      DWORD PTR _b$[ebp], 2
       mov      DWORD PTR _c$[ebp], 3
       mov      esp, ebp
       pop      ebp
       ret      0
_f1    ENDP

_c$ &#x3D; -12       ; size &#x3D; 4
_b$ &#x3D; -8        ; size &#x3D; 4
_a$ &#x3D; -4        ; size &#x3D; 4
_f2    PROC
       push     ebp
       mov      ebp, esp
       sub      esp, 12
       mov      eax, DWORD PTR _c$[ebp]
       push     eax
       mov      ecx, DWORD PTR _b$[ebp]
       push     ecx
       mov      edx, DWORD PTR _a$[ebp]
       push     edx
       push     OFFSET $SG2752 ; ‚Äô%d, %d, %d‚Äô
       call     DWORD PTR __imp__printf
       add      esp, 16
       mov      esp, ebp
       pop      ebp
       ret      0
_f2    ENDP

main   PROC
       push     ebp
       mov      ebp, esp
       call     _f1
       call     _f2
       xor      eax, eax
       pop      ebp
       ret      0
_main  ENDP<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Âú®Ëøô‰∏™Áâπ‰æãÈáåÔºåÁ¨¨‰∫å‰∏™ÂáΩÊï∞Âú®Á¨¨‰∏Ä‰∏™ÂáΩÊï∞‰πãÂêéÊâßË°åÔºåËÄåÁ¨¨‰∫å‰∏™ÂáΩÊï∞ÂèòÈáèÁöÑÂú∞ÂùÄÂíåSPÁöÑÂÄºÂèà‰∏éÁ¨¨‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÊÉÖÂÜµÁõ∏Âêå„ÄÇÊâÄ‰ª•ÔºåÁõ∏ÂêåÂú∞ÂùÄÁöÑÂèòÈáèËé∑ÂæóÁöÑÂÄºÁõ∏Âêå„ÄÇ</p>
<p>ÊÄªËÄåË®Ä‰πãÔºåÂú®ËøêË°åÁ¨¨‰∫å‰∏™ÂáΩÊï∞Êó∂ÔºåÊ†à‰∏≠ÁöÑÊâÄÊúâÂÄºÔºàÂç≥ÂÜÖÂ≠ò‰∏≠ÁöÑÂçïÂÖÉÔºâÂèóÂâç‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÂΩ±ÂìçÔºåËÄåËé∑Âæó‰∫ÜÂâç‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÂèòÈáèÁöÑÂÄº„ÄÇ‰∏•Ê†ºÂú∞ËØ¥ÔºåËøô‰∫õÂú∞ÂùÄÁöÑÂÄº‰∏çÊòØÈöèÊú∫ÂÄºÔºåËÄåÊòØÂèØÈ¢ÑÊµãÁöÑ‰º™ÈöèÊú∫ÂÄº„ÄÇ</p>
<h3 id="problems-2"><a class="markdownIt-Anchor" href="#problems-2"></a> Problems</h3>
<h4 id="51"><a class="markdownIt-Anchor" href="#51"></a> 5.1</h4>
<p>Â¶ÇÊûú‰ΩøÁî®MSVCÁºñËØë„ÄÅËøêË°å‰∏ãÂàóÁ®ãÂ∫èÔºåÂ∞Ü‰ºöÊâìÂç∞Âá∫3‰∏™Êï¥Êï∞„ÄÇËøô‰∫õÊï∞ÂÄºÊù•Ëá™Âì™ÈáåÔºüÂ¶ÇÊûú‰ΩøÁî®MSVCÁöÑ‰ºòÂåñÈÄâÈ°π‚Äú/Ox‚ÄùÔºåÁ®ãÂ∫èÂèà‰ºöÂú®Â±èÂπï‰∏äËæìÂá∫‰ªÄ‰πàÔºü‰∏∫‰ªÄ‰πàGCCÁöÑÊÉÖÂÜµÂÆåÂÖ®‰∏çÂêåÔºü</p>
<pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;

int main() 
&#123;
         printf (&quot;%d, %d, %d\n&quot;);

         return 0;
&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Â¶ÇÊûúÊú™ÂêØÁî®MSVCÁöÑ‰ºòÂåñÁºñËØëÂäüËÉΩÔºåÁ®ãÂ∫èÊòæÁ§∫ÁöÑÊï∞Â≠óÂàÜÂà´ÊòØEBPÁöÑÂÄº„ÄÅRAÂíåargc„ÄÇÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊâßË°åÁõ∏Â∫îÁöÑÁ®ãÂ∫èÂç≥ÂèØËøõË°åÈ™åËØÅ„ÄÇ</p>
<p>Â¶ÇÊûúÂêØÁî®‰∫ÜMSVCÁöÑ‰ºòÂåñÁºñËØëÂäüËÉΩÔºåÁ®ãÂ∫èÊòæÁ§∫ÁöÑÊï∞Â≠óÂàÜÂà´Êù•Ëá™ÔºöËøîÂõûÂú∞ÂùÄRA„ÄÅargcÂíåÊï∞ÁªÑargvÔºªÔºΩ„ÄÇ</p>
<p>GCC‰ºöÁªômain() ÂáΩÊï∞ÁöÑÂÖ•Âè£ÂàÜÈÖç16Â≠óËäÇÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåÊâÄ‰ª•ËæìÂá∫ÂÜÖÂÆπ‰ºöÊúâ‰∏çÂêå„ÄÇ</p>
<h4 id="52"><a class="markdownIt-Anchor" href="#52"></a> 5.2</h4>
<p>Á≠îÔºöÊâìÂç∞Êó∂Èó¥</p>
<h2 id="chap6-printfÂáΩÊï∞‰∏éÂèÇÊï∞‰º†ÈÄí"><a class="markdownIt-Anchor" href="#chap6-printfÂáΩÊï∞‰∏éÂèÇÊï∞‰º†ÈÄí"></a> Chap6 printf()ÂáΩÊï∞‰∏éÂèÇÊï∞‰º†ÈÄí</h2>
<p>ÊºîÁ§∫Á®ãÂ∫è</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"a=%d,b=%d,c=%d"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Áî®<code> g++ -m32 -o 1 1.c</code>ËøõË°åÁºñËØëÊàñËÄÖ‰ΩøÁî®<code>MSVS</code>Â∑•ÂÖ∑ÈìæËøõË°åÁºñËØëÔºåË∑üÈöèÊú¨‰π¶ÁöÑËäÇÂ•èÔºåÈÖçÁΩÆ‰∏Ä‰∏ã<code>MSVS</code>ÁöÑÁéØÂ¢É</p>
<p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/cpp/build/building-on-the-command-line?view=msvc-170#download-and-install-the-tools">ÈÄöËøáÂëΩ‰ª§Ë°å‰ΩøÁî® Microsoft C++ Â∑•ÂÖ∑ÈõÜ | Microsoft Learn</a></p>
<p>È¶ñÂÖàÂ∞Ü<code>Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build</code>Âä†ÂÖ•ÁéØÂ¢ÉÂèòÈáè</p>
<p>ÂëΩ‰ª§Ë°åËæìÂÖ•<code>vcvarsall.bat x86</code></p>
<p>ÁÑ∂Âêé<code>cl 1.cpp</code></p>
<hr />
<p>MSVSÂ∑•ÂÖ∑Èìæ‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÊåá‰ª§</p>
<p><code>cl /Fa 1.c</code>ÁîüÊàê‰∏çÂ∏¶Ê≥®ÈáäÁöÑÊ±áÁºñ‰ª£Á†Å</p>
<p><code>cl /FAs 1.c</code>ÁîüÊàêÂ∏¶Ê≥®ÈáäÁöÑÊ±áÁºñ‰ª£Á†Å,ÁîüÊàê1.asm</p>
<p><code>dumpbin /all example.obj</code>ÊòæÁ§∫ÁõÆÊ†áÊñá‰ª∂‰∏≠ÁöÑÊâÄÊúâ‰ø°ÊÅØÔºåÂåÖÊã¨ÊÆµÂÜÖÂÆπ„ÄÅÁ¨¶Âè∑Ë°®ÂíåÈáçÂÆö‰Ωç‰ø°ÊÅØ„ÄÇ</p>
<p>/c ‰ª£Ë°®Âè™ÁºñËØë‰∏çÈìæÊé•„ÄÇ</p>
<p>/I ÊåáÂÆöÂ§¥Êñá‰ª∂ÁöÑÁõÆÂΩï</p>
<p>/C Âú®ÁºñËØëÊúüÈó¥‰øùÁïô‰ª£Á†ÅÊ≥®ÈáäÔºåËøôÈáåÂíå/IËøûÂú®‰∏ÄËµ∑‰ΩøÁî®Ôºå/IC</p>
<p>È¶ñÂÖà‰ªãÁªç‰∏Ä‰∏™Ê¶ÇÂøµÔºåVC‰∏≠Êúâ‰∏™PDBÊñá‰ª∂ÔºåÂÖ®Áß∞ÊòØProgram DatabaseÔºåÁî®Êù•Â≠òÊîæÁ®ãÂ∫è‰ø°ÊÅØÁöÑÂ∞èÁöÑ<a target="_blank" rel="noopener" href="http://lib.csdn.net/base/14">Êï∞ÊçÆÂ∫ì</a>Êñá‰ª∂„ÄÇ</p>
<p>ÁºñËØëDebugÁâàÊú¨Êó∂ÔºåË∞ÉËØï‰ø°ÊÅØÈúÄË¶Å‰øùÁïôÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄâÊã©Áõ¥Êé•Â∞ÜË∞ÉËØï‰ø°ÊÅØÂÜôÂà∞.objÊñá‰ª∂‰∏≠ÔºåÊàñËÄÖÂ≠òÂà∞.pdbÊñá‰ª∂‰∏≠„ÄÇ</p>
<p>/Z7 ‰∏ç‰∫ßÁîü.pdbÊñá‰ª∂ÔºåÂ∞ÜÊâÄÊúâË∞ÉËØï‰ø°ÊÅØÂ≠òÂÖ•.objÊñá‰ª∂‰∏≠</p>
<p>/ZiÂíå/ZI ÈÉΩ‰∫ßÁîü.pdbÊñá‰ª∂Ôºå‰∏çËøá/ZIÊîØÊåÅ&quot;ÁºñËæëÁªßÁª≠Ë∞ÉËØï&quot;ÂäüËÉΩ, (the edit and continue feature), Áúã‰∏äÂéªÊõ¥ÈÖ∑Ôºå‰ΩÜÊòØÊàë‰ªéÊù•Ê≤°ÊúâÁî®ËøáËøô‰∏™ÂäüËÉΩ„ÄÇ</p>
<p>/ZIÊúâ‰∏Ä‰∫õËæπÈôÖÊïàÂ∫îÔºå‰ºöÁ¶ÅÊ≠¢#pragma optmize Êåá‰ª§Ôºå‰πü‰∏çËÉΩÂíå/clr‰∏ÄËµ∑Áî®„ÄÇ</p>
<p>/nologo- Â∑≤ÁªèÊó†ÊïàÔºåËá™Â∑±ÁîüÊàêÂëΩ‰ª§Ë°åÁöÑÊó∂ÂÄôÔºåÊ≤°ÂøÖË¶ÅÁî®‰∫Ü„ÄÇ</p>
<p>/W3 ‰πü‰∏≠Ë≠¶ÂëäÁ∫ßÂà´ÔºåVCÊèê‰æõ‰∫ÜÂæàÂ§öË≠¶ÂëäÁ∫ßÂà´ÔºåÂèÇËÄÉ<a target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/library/vstudio/thxezb7y.aspx">http://msdn.microsoft.com/en-us/library/vstudio/thxezb7y.aspx</a></p>
<p>Ëá™Â∑±ÁºñËØëÁöÑËØùÔºåÁõ¥Êé•Áî®/WallÊúÄÂ•Ω„ÄÇ</p>
<p>/WX- ‰∏çÂ§™ÊòéÁôΩ‰∏∫‰ªÄ‰πàÊúâ - Âè∑ÔºåÔºà‰º∞ËÆ°ÊòØÂíå:NOÁöÑÊÑèÊÄùÁõ∏ÂêåÔºå‰πüÂ∞±ÊòØ‰∏çÂêØÁî®ËØ•ÂäüËÉΩÔºâÔºå /WXÁöÑÊÑèÊÄùÊòØÂ∞ÜwarningËΩ¨ÂèòÊàêerrorÔºåËøôÊ†∑Âº∫Ëø´Ê∂àÈô§ÊâÄÊúâÁöÑwarningÔºåÂ¶ÇÊûúÂíå/Wall‰∏ÄËµ∑‰ΩøÁî®ÔºåÈÇ£ÊòØÊúÄÂ•ΩÁöÑ„ÄÇ</p>
<p>/sdl ÊòØÂØπ‰ª£Á†ÅËøõË°åÂÆâÂÖ®Ê£ÄÊü•ÔºåÂ¶ÇÊûúÂèëÁé∞Áõ∏ÂÖ≥Ë≠¶ÂëäÔºåËΩ¨ÂèòÊàêÈîôËØØËæìÂá∫</p>
<p>/Od Á¶ÅÊ≠¢‰ºòÂåñ</p>
<p>/Oy- Á¶ÅÊ≠¢ËØ•ÈÄâÈ°πÔºåËØ•ÈÄâÈ°πÂ¶ÇÊûúÊ≤°Êúâ - Âè∑ÔºåÂàô‰ºöÂú®x86‰∏äÁºñËØëÊó∂ÂøΩÁï•frame-pointerÔºåËµ∑Âà∞Âä†ÈÄüÁ®ãÂ∫èÁöÑ‰ΩúÁî®„ÄÇ frame-pointerÔºåÊàëÊöÇÊó∂‰∏çÁü•ÈÅìÊòØÂï•„ÄÇ</p>
<p>/D È¢ÑÂ§ÑÁêÜÂÆö‰πâÔºåÂêéÈù¢ÂèØ‰ª•Ë∑ü‰∏çÂêåÁöÑÂèÇÊï∞ÈÉΩÊòØÂÆèÂïäÔºåÊØîÂ¶Ç<br />
/Gm ÂêØÁî®ÊúÄÂ∞èÂåñÈáçÊñ∞ÁºñËØë, VCÁî®.idb‰øùÁïô‰∫Ü‰∏äÊ¨°ÁºñËØëÁöÑÁºìÂ≠ò‰ø°ÊÅØÔºåÂåÖÊã¨Êñá‰ª∂‰æùËµñÂÖ≥Á≥ª„ÄÇ‰∏ãÊ¨°ÁºñËØëÊó∂ÂèØ‰ª•‰ΩøÁî®.idbÊñá‰ª∂Áî®Êù•Ê£ÄÊü•ÔºåË∑≥Ëøá‰∏çÈúÄË¶ÅÈáçÊñ∞ÁºñËØëÁöÑÊñá‰ª∂„ÄÇ</p>
<p>ÂÖ∑‰ΩìÂèÇËßÅ:</p>
<p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/cpp/build/reference/compiler-options?view=msvc-170&amp;redirectedfrom=MSDN">MSVC Compiler Options | Microsoft Learn</a></p>
<h3 id="x86"><a class="markdownIt-Anchor" href="#x86"></a> x86</h3>
<p>MSVSÁºñËØëÂæóÂà∞ÁöÑÊ±áÁºñÊåá‰ª§Â¶Ç‰∏ã</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">_TEXT	SEGMENT
_main	PROC

; 3    : &#123;

	push	ebp
	mov	ebp, esp

; 4    :     printf(&quot;a&#x3D;%d,b&#x3D;%d,c&#x3D;%d&quot;,1,2,3);

	push	3
	push	2
	push	1
	push	OFFSET $SG9695
	call	_printf
	add	esp, 16					; 00000010H

; 5    :     return 0; 

	xor	eax, eax

; 6    : &#125;

	pop	ebp
	ret	0
_main	ENDP
_TEXT	ENDS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ÂèØ‰ª•ÁúãÂà∞<code>printf()</code>ÂáΩÊï∞ÁöÑÂèÇÊï∞ÊòØÈÄÜÂ∫èÂ≠òÂÖ•Ê†à‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Âú®ÊúÄÂêéÂÖ•Ê†à</p>
<p>Âú®<code>32</code>‰Ωç‰∏ãÔºå32‰ΩçÂú∞ÂùÄÊåáÈíàÂíåintÁ±ªÂûãÊï∞ÊçÆÈÉΩÂç†ÊçÆ<code>32‰Ωç</code>Âç≥<code>4Â≠óËäÇ</code>ÁöÑÁ©∫Èó¥ÔºåÂõ†Ê≠§4‰∏™ÂèÇÊï∞ÊÄªÂÖ±Âç†Áî®<code>16</code>Â≠óËäÇÁöÑÂ≠òÂÇ®Á©∫Èó¥</p>
<p>Âõ†Ê≠§Âú®Ë∞ÉÁî®ÂáΩÊï∞‰πãÂêéÔºå‚ÄúADD ESP, X‚ÄùÊåá‰ª§‰øÆÊ≠£ESPÂØÑÂ≠òÂô®‰∏≠ÁöÑÊ†àÊåáÈíà„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøácall‰πãÂêéÁöÑËøôÊù°Êåá‰ª§Âà§Êñ≠ÂèÇÊï∞ÁöÑÊï∞ÈáèÔºö<code>ÂèòÈáèÊÄªÊï∞Ôºù*X*√∑4„ÄÇ</code>(‰ªÖÈÄÇÁî®‰∫éË∞ÉÁî®Á∫¶ÂÆö‰∏∫<code>cdecl</code>ÁöÑÁ®ãÂ∫è)</p>
<p>Â¶ÇÊûúÊüê‰∏™Á®ãÂ∫èËøûÁª≠Âú∞Ë∞ÉÁî®Â§ö‰∏™ÂáΩÊï∞Ôºå‰∏îË∞ÉÁî®ÂáΩÊï∞ÁöÑÊåá‰ª§‰πãÈó¥‰∏çÂ§πÊùÇÂÖ∂‰ªñÊåá‰ª§ÔºåÈÇ£‰πàÁºñËØëÂô®ÂèØËÉΩÊääÈáäÊîæÂèÇÊï∞Â≠òÂÇ®Á©∫Èó¥ÁöÑ‚ÄúADD ESP,X‚ÄùÊåá‰ª§ËøõË°åÂêàÂπ∂Ôºå‰∏ÄÊ¨°ÊÄßÂú∞ÈáäÊîæÊâÄÊúâÁ©∫Èó¥</p>
<hr />
<p>‰ΩìÈ™åÁî®<code>onlydbg</code>Âä†ËΩΩËøô‰∏™Á®ãÂ∫è</p>
<p>ËøôÈáåÈúÄË¶ÅÁî®Âà∞debugÁâàÊú¨ÁöÑÁºñËØëÂëΩ‰ª§</p>
<p><code>cl /Z7 /EHsc 1.exe 1.c</code>‰æø‰∫éË∑üË∏™Á®ãÂ∫è</p>
<p>ÊâæÂà∞<code>main</code>ÂáΩÊï∞ÁöÑÊñπÊ≥ï:ÊñπÊ≥ïÂæàÂ§öÔºå‰∏çÁªÜËØ¥‰∫Ü</p>
<p>ÂÖ∑‰ΩìÊìç‰ΩúÊåâ‰π¶‰∏äÊù•</p>
<h2 id="chap7-scanf"><a class="markdownIt-Anchor" href="#chap7-scanf"></a> Chap7 scanf()</h2>
<p>ÊºîÁ§∫Á®ãÂ∫è</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> x<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Enter X:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"You Entered: %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="x86-2"><a class="markdownIt-Anchor" href="#x86-2"></a> x86</h3>
<p><code>cl /FAs /Z7 2 2.c</code></p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">_DATA	SEGMENT
$SG9696	DB	&#39;Enter X:&#39;, 0aH, 00H
	ORG $+2
$SG9697	DB	&#39;%d&#39;, 00H
	ORG $+1
$SG9698	DB	&#39;You Entered: %d&#39;, 0aH, 00H
_DATA	ENDS
_TEXT	SEGMENT
_x$ &#x3D; -4						; size &#x3D; 4
_main	PROC

; 3    : &#123;

	push	ebp
	mov	ebp, esp
	push	ecx

; 4    :     int x;
; 5    :     printf(&quot;Enter X:\n&quot;);

	push	OFFSET $SG9696
	call	_printf
	add	esp, 4

; 6    :     scanf(&quot;%d&quot;, &amp;x);

	lea	eax, DWORD PTR _x$[ebp]
	push	eax
	push	OFFSET $SG9697
	call	_scanf
	add	esp, 8

; 7    : 
; 8    :     printf(&quot;You Entered: %d\n&quot;, x);

	mov	ecx, DWORD PTR _x$[ebp]
	push	ecx
	push	OFFSET $SG9698
	call	_printf
	add	esp, 8

; 9    :     return 0;

	xor	eax, eax

; 10   : &#125;

	mov	esp, ebp
	pop	ebp
	ret	0
_main	ENDP<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Ê±áÁºñËß£ËØª:</p>
<ul>
<li>
<p>ÂèØ‰ª•ÁúãÂà∞Ôºå<code>scanf()</code>‰º†ÈÄíÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞(eax)ÊòØ‰∏Ä‰∏™ÊåáÂêëÊ†à‰∏≠ÁöÑÊåáÈíàÔºåxÊòØÂ±ÄÈÉ®ÂèòÈáèÔºåÂ≠òÂÇ®Âú®Ê†à‰∏≠„ÄÇÂú®Ê†à‰∏≠ÂàÜÈÖç‰∫Ü4Â≠óËäÇÁ©∫Èó¥ÔºåÂ≠òÂÇ®Â±ÄÈÉ®ÂèòÈáèx</p>
</li>
<li>
<p>**Ê±áÁºñÂÆè_x$ ÔºàÂÖ∂ÂÄº‰∏∫‚àí4Ôºâ**Áî®‰∫éËÆøÈóÆÂ±ÄÈÉ®ÂèòÈáè<em>x</em>ÔºåËÄåEBPÂØÑÂ≠òÂô®Áî®Êù•Â≠òÂÇ®Ê†àÂΩìÂâçÂ∏ßÁöÑÊåáÈíà„ÄÇ</p>
<p>Âú®ÂáΩÊï∞ËøêË°åÁöÑÊúüÈó¥ÔºåEBP‰∏ÄÁõ¥ÊåáÂêëÂΩìÂâçÁöÑÊ†àÂ∏ßÔºàstack frameÔºâ„ÄÇËøôÊ†∑ÔºåÂáΩÊï∞Âç≥ÂèØÈÄöËøá<strong>EBP+offsetÁöÑÊñπÂºèËÆøÈóÆÊú¨Âú∞ÂèòÈáè„ÄÅ‰ª•ÂèäÂ§ñÈÉ®‰º†ÂÖ•ÁöÑÂáΩÊï∞ÂèÇÊï∞</strong>„ÄÇ</p>
<p>ESP‰πüÂèØ‰ª•Áî®Êù•ËÆøÈóÆÊú¨Âú∞ÂèòÈáèÔºåËé∑ÂèñÂáΩÊï∞ÊâÄÈúÄÁöÑËøêË°åÂèÇÊï∞„ÄÇ‰∏çËøá<strong>ESPÁöÑÂÄºÁªèÂ∏∏ÂèëÁîüÂèòÂåñÔºåÁî®Ëµ∑Êù•Âπ∂‰∏çÊñπ‰æø</strong>„ÄÇÂáΩÊï∞Âú®ÂêØÂä®‰πãÂàùÂ∞±‰ºöÂà©Áî®EBPÂØÑÂ≠òÂô®‰øùÂ≠òESPÂØÑÂ≠òÂô®ÁöÑÂÄº„ÄÇËøôÂ∞±ÊòØ‰∏∫‰∫ÜÁ°Æ‰øùÂú®ÂáΩÊï∞ËøêË°åÊúüÈó¥‰øùËØÅEBPÂØÑÂ≠òÂô®Â≠òÂÇ®ÁöÑÂéüÂßãESPÂÄºÂõ∫ÂÆö‰∏çÂèò„ÄÇ</p>
<p>Âú®32‰ΩçÁ≥ªÁªüÈáåÔºåÂÖ∏ÂûãÁöÑÊ†àÂ∏ßÔºàstack frameÔºâÁªìÊûÑÂ¶Ç‰∏ãË°®ÊâÄÁ§∫„ÄÇ</p>
<table>
<thead>
<tr>
<th>‚Ä¶‚Ä¶</th>
<th>‚Ä¶‚Ä¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>EBP-8</td>
<td>Â±ÄÈÉ®ÂèòÈáèÔºÉ2ÔºåIDAÊ†áËÆ∞‰∏∫var_8</td>
</tr>
<tr>
<td>EBP-4</td>
<td>Â±ÄÈÉ®ÂèòÈáèÔºÉ1ÔºåIDAÊ†áËÆ∞‰∏∫var_4</td>
</tr>
<tr>
<td>EBP</td>
<td>EBPÁöÑÂÄº</td>
</tr>
<tr>
<td>EBP+4</td>
<td>ËøîÂõûÂú∞ÂùÄReturn address</td>
</tr>
<tr>
<td>EBP+8</td>
<td>ÂáΩÊï∞ÂèÇÊï∞ÔºÉ1ÔºåIDAÊ†áËÆ∞‰∏∫arg_0</td>
</tr>
<tr>
<td>EBP+0xC</td>
<td>ÂáΩÊï∞ÂèÇÊï∞ÔºÉ2ÔºåIDAÊ†áËÆ∞‰∏∫arg_4</td>
</tr>
<tr>
<td>EBP+0x10</td>
<td>ÂáΩÊï∞ÂèÇÊï∞ÔºÉ3ÔºåIDAÊ†áËÆ∞‰∏∫arg_8</td>
</tr>
<tr>
<td>‚Ä¶‚Ä¶</td>
<td>‚Ä¶‚Ä¶</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>scanf()</code>Âú®Ê≠§‰æã‰∏≠Êúâ‰∏§‰∏™ÂèÇÊï∞,Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåÊåáÂêëÂê´Êúâ&quot;%d&quot;ÁöÑÊ†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÂ±ÄÈÉ®ÂèòÈáè<code>x</code>ÁöÑÂú∞ÂùÄ</p>
<p>‚Äúlea eax, DWORD PTR _x$[ebp]‚ÄùÊåá‰ª§Â∞ÜÂèòÈáè<em>x</em>ÁöÑÂú∞ÂùÄÊîæÂÖ•EAXÂØÑÂ≠òÂô®„ÄÇ</p>
<p>Âú®Ê≠§Â§Ñ<code>LEA</code>‰ºöÂ∞Ü<code>EBP</code>ÂØÑÂ≠òÂô®ÂÄº‰∏éÂÆè_x$Ê±ÇÂíå,ÁÑ∂ÂêéÂ∞ÜËøô‰∏™ÁªìÊûúÂ≠òÂÇ®Âà∞<code>EAX</code>ÔºåÁÑ∂ÂêéÊää<code>EAX</code>ÂØÑÂ≠òÂô®ÁöÑÂÄºÈÄÅÂÖ•Ê†à‰∏≠(Â∞±ÊòØÊääxÁöÑÂú∞ÂùÄÈÄÅÂÖ•EAXÂØÑÂ≠òÂô®)</p>
</li>
<li>
<p>ËÄåÂêéË∞ÉÁî®<code>printf()</code>ÂáΩÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Âç≥Ê†ºÂºèÂåñÂ≠óÁ¨¶‰∏≤ÁöÑÊåáÈíà</p>
<p>Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ<code>mov ecx,[ebp-4]</code>Èó¥Êé•ÂèñÂÄºÔºå‰º†ÈÄíÁªôecxÁöÑÂÄºÊòØ<code>ebp-4</code>ÊåáÂêëÁöÑÂú∞ÂùÄÁöÑÂÄºÔºåÂç≥ÂèòÈáèxÁöÑÂÄº</p>
</li>
</ul>
<hr />
<p>Áî®<code>onlydbg</code>Âä®ÊÄÅË∑üË∏™Ëøô‰∏™ËøáÁ®ãÔºåÂÖ∑‰Ωì‰π¶‰∏äÊúâ</p>
<ul>
<li>Ë∞ÉËØïÂèØ‰ª•ÂèëÁé∞ÔºåÊâßË°åÂÆå<code>scanf()</code>ÂáΩÊï∞,<code>EAX</code>Â≠òÂÇ®ÊúâÂáΩÊï∞ÁöÑËøîÂõûÂÄºÔºåÂÖ∂ÂÄºÊòØ<code>scanf()</code>ËØªÂèñÂèÇÊï∞ÁöÑ‰∏™Êï∞</li>
<li>Êàë‰ª¨ÂèØ‰ª•Âú®Ê†à‰∏≠ÊâæÂà∞Â±ÄÈÉ®ÂèòÈáèÁöÑÂú∞ÂùÄÔºåËøõËÄåË∑üË∏™ÂÖ∂ÂÄº</li>
</ul>
<h3 id="ÂÖ®Â±ÄÂèòÈáè"><a class="markdownIt-Anchor" href="#ÂÖ®Â±ÄÂèòÈáè"></a> ÂÖ®Â±ÄÂèòÈáè</h3>
<p>Â¶ÇÊûú‰∏äÊñáÁöÑ<code>x</code>ÊòØÂÖ®Â±ÄÂèòÈáè,‰ºöÊúâ‰ªÄ‰πàÊ†∑ÁöÑÂèòÂåñ</p>
<p>Â∞Ü<code>x</code>ÊîπÊàêÂÖ®Â±ÄÂèòÈáè</p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">_DATA	SEGMENT
$SG9696	DB	&#39;Enter X:&#39;, 0aH, 00H
	ORG $+2
$SG9697	DB	&#39;%d&#39;, 00H
	ORG $+1
$SG9698	DB	&#39;You Entered: %d&#39;, 0aH, 00H
_DATA	ENDS
_TEXT	SEGMENT
_main	PROC

; 4    : &#123;

	push	ebp
	mov	ebp, esp

; 5    :    
; 6    :     printf(&quot;Enter X:\n&quot;);

	push	OFFSET $SG9696
	call	_printf
	add	esp, 4

; 7    :     scanf(&quot;%d&quot;, &amp;x);

	push	OFFSET _x
	push	OFFSET $SG9697
	call	_scanf
	add	esp, 8

; 8    : 
; 9    :     printf(&quot;You Entered: %d\n&quot;, x);

	mov	eax, DWORD PTR _x
	push	eax
	push	OFFSET $SG9698
	call	_printf
	add	esp, 8

; 10   :     return 0;

	xor	eax, eax

; 11   : &#125;

	pop	ebp
	ret	0
_main	ENDP
_TEXT	ENDS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>
<p>ÂèØ‰ª•ÂèëÁé∞<code>x</code>ÁöÑÂ≠òÂÇ®Á©∫Èó¥‰∏çÂÜçÁî±Ê†à‰∏≠Â≠òÂÇ®,ËÄåÊòØÂú®Êï∞ÊçÆÊÆµ(Áî±‰∫éÊ≤°ÁªôxËµãÂÄºÔºåÁºñËØëÂô®Ëá™Âä®‰ºòÂåñ‰∏∫bssÊÆµ(‰∏çÂç†ÊçÆÁ©∫Èó¥))</p>
</li>
<li>
<p>Â¶ÇÊûúÂØπ‰∏äËø∞Ê∫ê‰ª£Á†ÅÁ®çÂÅöÊîπÂä®ÔºåÂä†‰∏äÂèòÈáèÂàùÂßãÂåñÁöÑÊåá‰ª§Ôºö</p>
<pre class="line-numbers language-none"><code class="language-none">int x&#x3D;10; &#x2F;&#x2F;ËÆæÁΩÆÈªòËÆ§ÂÄº<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÈÇ£‰πàÂØπÂ∫îÁöÑ‰ª£Á†Å‰ºöÂèò‰∏∫Ôºö</p>
<pre class="line-numbers language-none"><code class="language-none">_DATA   SEGMENT
_x      DD      0aH
...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>‰∏äËø∞Êåá‰ª§Â∞ÜÂàùÂßãÂåñx„ÄÇÂÖ∂‰∏≠DD‰ª£Ë°®DWORDÔºåË°®Á§∫<em>x</em>ÊòØ32‰ΩçÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>Ëã•Âú®IDAÈáåÊâìÂºÄÂØπxËøõË°åÂàùÂßãÂåñÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåÊàë‰ª¨Â∞Ü‰ºöÁúãÂà∞Âú®Êï∞ÊçÆÊÆµÁöÑÂºÄÂ§¥ÈÉ®ÂàÜÁúãÂà∞ÂàùÂßãÂåñÂèòÈáè<em>x</em>„ÄÇÁ¥ßÈöèÂÖ∂ÂêéÁöÑÁ©∫Èó¥Áî®‰∫éÂ≠òÂÇ®Êú¨‰æã‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</p>
<p>Áî®IDAÊâìÂºÄ7.2ËäÇÈáåÈÇ£‰∏™‰∏çÂàùÂßãÂåñÂèòÈáè<em>x</em>ÁöÑ‰æãÂ≠êÔºåÈÇ£‰πàÂ∞Ü‰ºöÁúã</p>
<p>ÊúâÂæàÂ§öÂ∏¶‚ÄúÔºü‚ÄùÊ†áËÆ∞ÁöÑÂèòÈáèÔºåËøôÊòØÊú™ÂàùÂßãÂåñÁöÑ<em>x</em>ÂèòÈáèÁöÑÊ†áËÆ∞„ÄÇËøôÊÑèÂë≥ÁùÄÂú®Á®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰πãÂêéÔºåÊìç‰ΩúÁ≥ªÁªüÂ∞Ü‰∏∫Ëøô‰∫õÂèòÈáèÂàÜÈÖçÁ©∫Èó¥„ÄÅÂπ∂Â°´ÂÖ•Êï∞Â≠óÈõ∂„ÄÇ‰ΩÜÊòØÂú®ÂèØÊâßË°åÊñá‰ª∂ÈáåÔºåËøô‰∫õÊú™ÂàùÂßãÂåñÁöÑÂèòÈáè‰∏çÂç†Áî®ÂÜÖÂ≠òÁ©∫Èó¥„ÄÇ‰∏∫‰∫ÜÊñπ‰æø‰ΩøÁî®Â∑®ÂûãÊï∞ÁªÑ‰πãÁ±ªÁöÑÂ§ßÂûãÊï∞ÊçÆÔºå‰∫∫‰ª¨ÂàªÊÑèÂÅö‰∫ÜËøôÁßçËÆæÂÆö„ÄÇ</p>
</li>
</ul>
<h3 id="problem"><a class="markdownIt-Anchor" href="#problem"></a> Problem</h3>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>

<span class="token keyword">void</span> <span class="token function">alter_string</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
        <span class="token function">strcpy</span> <span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"Goodbye!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span> <span class="token punctuation">(</span><span class="token string">"Result: %s\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
        <span class="token function">alter_string</span> <span class="token punctuation">(</span><span class="token string">"Hello, world!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Âú®<code>win</code>ÂèØËøêË°åÔºåÂõ†‰∏∫sÊòØÂú®dataÊÆµ</p>
<p>ËÄåÂú®<code>linux</code>‰∏çÂèØËøêË°åÔºåsÂ≠òÂÇ®Âú®<code>rodata</code>ÊÆµÔºå‰∏çÂèØÂÜô</p>
<h2 id="chap8-ÂèÇÊï∞Ëé∑Âèñ"><a class="markdownIt-Anchor" href="#chap8-ÂèÇÊï∞Ëé∑Âèñ"></a> Chap8 ÂèÇÊï∞Ëé∑Âèñ</h2>
<p>main()ÂáΩÊï∞Êää3‰∏™Êï∞Â≠óÊé®ÈÄÅÂÖ•Ê†àÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫Üf(int, int, int)„ÄÇË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞f()ÈÄöËøá_a<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>8</mn><mtext>‰∏ÄÁ±ªÁöÑÊ±áÁºñÂÆèËÆøÈóÆÊâÄÈúÄÂèÇÊï∞‰ª•ÂèäÂáΩÊï∞Ëá™ÂÆö‰πâÁöÑÂ±ÄÈÉ®ÂèòÈáè„ÄÇÂè™‰∏çËøá‰ªéË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞ÁöÑÊï∞ÊçÆÊ†àÁöÑËßíÂ∫¶Êù•ÁúãÔºåÂ§ñÈÉ®ÂèÇËÄÉÁöÑÂÅèÁßªÈáèÊòØÊ≠£ÂÄºÔºåËÄåÂ±ÄÈÉ®ÂèòÈáèÁöÑÂÅèÁßªÈáèÊòØË¥üÂÄº„ÄÇÂèØËßÅÔºåÂΩìÈúÄË¶ÅËÆøÈóÆÊ†àÂ∏ßÔºà</mtext><mi>s</mi><mi>t</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>f</mi><mi>r</mi><mi>a</mi><mi>m</mi><mi>e</mi><mtext>Ôºâ‰ª•Â§ñÁöÑÊï∞ÊçÆÊó∂ÔºåË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞ÂèØÊääÊ±áÁºñÂÆèÔºà‰æã</mtext><msub><mtext>Â¶Ç</mtext><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">=8‰∏ÄÁ±ªÁöÑÊ±áÁºñÂÆèËÆøÈóÆÊâÄÈúÄÂèÇÊï∞‰ª•ÂèäÂáΩÊï∞Ëá™ÂÆö‰πâÁöÑÂ±ÄÈÉ®ÂèòÈáè„ÄÇÂè™‰∏çËøá‰ªéË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞ÁöÑÊï∞ÊçÆÊ†àÁöÑËßíÂ∫¶Êù•ÁúãÔºåÂ§ñÈÉ®ÂèÇËÄÉÁöÑÂÅèÁßªÈáèÊòØÊ≠£ÂÄºÔºåËÄåÂ±ÄÈÉ®ÂèòÈáèÁöÑÂÅèÁßªÈáèÊòØË¥üÂÄº„ÄÇÂèØËßÅÔºåÂΩìÈúÄË¶ÅËÆøÈóÆÊ†àÂ∏ßÔºàstack frameÔºâ‰ª•Â§ñÁöÑÊï∞ÊçÆÊó∂ÔºåË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞ÂèØÊääÊ±áÁºñÂÆèÔºà‰æãÂ¶Ç_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">8</span><span class="mord cjk_fallback">‰∏Ä</span><span class="mord cjk_fallback">Á±ª</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">Ê±á</span><span class="mord cjk_fallback">Áºñ</span><span class="mord cjk_fallback">ÂÆè</span><span class="mord cjk_fallback">ËÆø</span><span class="mord cjk_fallback">ÈóÆ</span><span class="mord cjk_fallback">ÊâÄ</span><span class="mord cjk_fallback">ÈúÄ</span><span class="mord cjk_fallback">ÂèÇ</span><span class="mord cjk_fallback">Êï∞</span><span class="mord cjk_fallback">‰ª•</span><span class="mord cjk_fallback">Âèä</span><span class="mord cjk_fallback">ÂáΩ</span><span class="mord cjk_fallback">Êï∞</span><span class="mord cjk_fallback">Ëá™</span><span class="mord cjk_fallback">ÂÆö</span><span class="mord cjk_fallback">‰πâ</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">Â±Ä</span><span class="mord cjk_fallback">ÈÉ®</span><span class="mord cjk_fallback">Âèò</span><span class="mord cjk_fallback">Èáè</span><span class="mord cjk_fallback">„ÄÇ</span><span class="mord cjk_fallback">Âè™</span><span class="mord cjk_fallback">‰∏ç</span><span class="mord cjk_fallback">Ëøá</span><span class="mord cjk_fallback">‰ªé</span><span class="mord cjk_fallback">Ë¢´</span><span class="mord cjk_fallback">Ë∞É</span><span class="mord cjk_fallback">Áî®</span><span class="mord cjk_fallback">Êñπ</span><span class="mord cjk_fallback">ÂáΩ</span><span class="mord cjk_fallback">Êï∞</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">Êï∞</span><span class="mord cjk_fallback">ÊçÆ</span><span class="mord cjk_fallback">Ê†à</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">Ëßí</span><span class="mord cjk_fallback">Â∫¶</span><span class="mord cjk_fallback">Êù•</span><span class="mord cjk_fallback">Áúã</span><span class="mord cjk_fallback">Ôºå</span><span class="mord cjk_fallback">Â§ñ</span><span class="mord cjk_fallback">ÈÉ®</span><span class="mord cjk_fallback">ÂèÇ</span><span class="mord cjk_fallback">ËÄÉ</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">ÂÅè</span><span class="mord cjk_fallback">Áßª</span><span class="mord cjk_fallback">Èáè</span><span class="mord cjk_fallback">ÊòØ</span><span class="mord cjk_fallback">Ê≠£</span><span class="mord cjk_fallback">ÂÄº</span><span class="mord cjk_fallback">Ôºå</span><span class="mord cjk_fallback">ËÄå</span><span class="mord cjk_fallback">Â±Ä</span><span class="mord cjk_fallback">ÈÉ®</span><span class="mord cjk_fallback">Âèò</span><span class="mord cjk_fallback">Èáè</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">ÂÅè</span><span class="mord cjk_fallback">Áßª</span><span class="mord cjk_fallback">Èáè</span><span class="mord cjk_fallback">ÊòØ</span><span class="mord cjk_fallback">Ë¥ü</span><span class="mord cjk_fallback">ÂÄº</span><span class="mord cjk_fallback">„ÄÇ</span><span class="mord cjk_fallback">ÂèØ</span><span class="mord cjk_fallback">ËßÅ</span><span class="mord cjk_fallback">Ôºå</span><span class="mord cjk_fallback">ÂΩì</span><span class="mord cjk_fallback">ÈúÄ</span><span class="mord cjk_fallback">Ë¶Å</span><span class="mord cjk_fallback">ËÆø</span><span class="mord cjk_fallback">ÈóÆ</span><span class="mord cjk_fallback">Ê†à</span><span class="mord cjk_fallback">Â∏ß</span><span class="mord cjk_fallback">Ôºà</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">Ôºâ</span><span class="mord cjk_fallback">‰ª•</span><span class="mord cjk_fallback">Â§ñ</span><span class="mord cjk_fallback">ÁöÑ</span><span class="mord cjk_fallback">Êï∞</span><span class="mord cjk_fallback">ÊçÆ</span><span class="mord cjk_fallback">Êó∂</span><span class="mord cjk_fallback">Ôºå</span><span class="mord cjk_fallback">Ë¢´</span><span class="mord cjk_fallback">Ë∞É</span><span class="mord cjk_fallback">Áî®</span><span class="mord cjk_fallback">Êñπ</span><span class="mord cjk_fallback">ÂáΩ</span><span class="mord cjk_fallback">Êï∞</span><span class="mord cjk_fallback">ÂèØ</span><span class="mord cjk_fallback">Êää</span><span class="mord cjk_fallback">Ê±á</span><span class="mord cjk_fallback">Áºñ</span><span class="mord cjk_fallback">ÂÆè</span><span class="mord cjk_fallback">Ôºà</span><span class="mord cjk_fallback">‰æã</span><span class="mord"><span class="mord cjk_fallback">Â¶Ç</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>Ôºâ‰∏éEBPÂØÑÂ≠òÂô®ÁöÑÂÄºÁõ∏Âä†Ôºå‰ªéËÄåÊ±ÇÂæóÊâÄÈúÄÂú∞ÂùÄ„ÄÇ</p>
<p>ÂΩìÂèòÈáè<em>a</em>ÁöÑÂÄºÂ≠òÂÖ•EAXÂØÑÂ≠òÂô®‰πãÂêéÔºåf()ÂáΩÊï∞ÈÄöËøáÂêÑÂèÇÊï∞ÁöÑÂú∞ÂùÄ‰æùÊ¨°ËøõË°å‰πòÊ≥ïÂíåÂä†Ê≥ïËøêÁÆóÔºåËøêÁÆóÁªìÊûú‰∏ÄÁõ¥Â≠òÂÇ®‰∫éEAXÂØÑÂ≠òÂô®„ÄÇÊ≠§ÂêéEAXÁöÑÂÄºÂ∞±ÂèØ‰ª•Áõ¥Êé•‰Ωú‰∏∫ËøîÂõûÂÄº‰º†ÈÄíÁªôË∞ÉÁî®ÊñπÂáΩÊï∞„ÄÇË∞ÉÁî®ÊñπÂáΩÊï∞main()ÂÜçÊääEAXÁöÑÂÄºÂΩì‰ΩúÂèÇÊï∞‰º†ÈÄíÁªôprintf()ÂáΩÊï∞„ÄÇ</p>
<h2 id="chap9-ËøîÂõûÂÄº"><a class="markdownIt-Anchor" href="#chap9-ËøîÂõûÂÄº"></a> Chap9 ËøîÂõûÂÄº</h2>
<p>Âú®<strong>x86Á≥ª</strong>ÁªüÈáåÔºåË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞ÈÄöÂ∏∏ÈÄöËøáEA<strong>XÂØÑÂ≠òÂô®ËøîÂõûËøêÁÆóÁªìÊûú</strong>„ÄÇËã•ËøîÂõûÂÄºÂ±û‰∫ébyteÊàñcharÁ±ªÂûãÊï∞ÊçÆÔºåËøîÂõûÂÄºÂ∞Ü<strong>Â≠òÂÇ®‰∫éEAXÂØÑÂ≠òÂô®ÁöÑ‰Ωé8‰Ωç‚Äî‚ÄîALÂØÑÂ≠òÂô®Â≠òÂÇ®ËøîÂõûÂÄº</strong>„ÄÇÂ¶ÇÊûú<strong>ËøîÂõûÂÄºÊòØÊµÆÁÇπfloatÂûãÊï∞ÊçÆÔºåÈÇ£‰πàËøîÂõûÂÄºÂ∞ÜÂ≠òÂÇ®Âú®FPUÁöÑST(0)ÂØÑÂ≠òÂô®</strong>Èáå„ÄÇARMÁ≥ªÁªüÁöÑÊÉÖÂÜµÁõ∏ÂØπÁÆÄÂçï‰∏Ä‰∫õÔºåÂÆÉÈÄöÂ∏∏‰ΩøÁî®R0ÂØÑÂ≠òÂô®Âõû‰º†ËøîÂõûÂÄº„ÄÇ</p>
<h3 id="voidÁ±ªÂûãÁöÑËøîÂõûÂÄº"><a class="markdownIt-Anchor" href="#voidÁ±ªÂûãÁöÑËøîÂõûÂÄº"></a> voidÁ±ªÂûãÁöÑËøîÂõûÂÄº</h3>
<p>Ë∞ÉÁî®<code>main</code></p>
<pre class="line-numbers language-assembly" data-language="assembly"><code class="language-assembly">push envp
push argv
push argc
call main
push eax
call exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰πüÂ∞±ÊòØ<code>exit(main(argc,argv,envp));</code></p>
<p>Â¶ÇÊûúÂ£∞Êòémain()ÁöÑÊï∞ÊçÆÁ±ªÂûãÊòØvoidÔºåÂàômain()ÂáΩÊï∞‰∏ç‰ºöÊòéÁ°ÆËøîÂõû‰ªª‰ΩïÂÄºÔºàÊ≤°ÊúâreturnÊåá‰ª§Ôºâ„ÄÇ‰∏çËøáÂú®main()ÂáΩÊï∞ÈÄÄÂá∫Êó∂ÔºåEAXÂØÑÂ≠òÂô®Ëøò‰ºöÂ≠òÊúâÊï∞ÊçÆÔºåEAXÂØÑÂ≠òÂô®‰øùÂ≠òÁöÑÊï∞ÊçÆ‰ºöË¢´‰º†ÈÄíÁªôexit()ÂáΩÊï∞„ÄÅÊàê‰∏∫ÂêéËÄÖÁöÑËæìÂÖ•ÂèÇÊï∞„ÄÇÈÄöÂ∏∏EAXÂØÑÂ≠òÂô®ÁöÑÂÄº‰ºöÊòØË¢´Ë∞ÉÁî®ÊñπÂáΩÊï∞ÊÆãÁïôÁöÑÁ°ÆÂÆöÊï∞ÊçÆÔºåÊâÄ‰ª•voidÁ±ªÂûãÂáΩÊï∞ÁöÑËøîÂõûÂÄº„ÄÅ‰πüÂ∞±ÊòØ‰∏ªÂáΩÊï∞ÈÄÄÂá∫‰ª£Á†ÅÂæÄÂæÄÂ±û‰∫é‰º™ÈöèÊú∫Êï∞ÔºàpseudorandomÔºâ</p>
<h4 id="ËøîÂõûÂÄº‰∏∫ÁªìÊûÑ‰ΩìÂûãÊï∞ÊçÆ"><a class="markdownIt-Anchor" href="#ËøîÂõûÂÄº‰∏∫ÁªìÊûÑ‰ΩìÂûãÊï∞ÊçÆ"></a> ËøîÂõûÂÄº‰∏∫ÁªìÊûÑ‰ΩìÂûãÊï∞ÊçÆ</h4>
<p>Ë∞ÉÁî®ÊñπÂáΩÊï∞ÔºàcallerÔºâÂàõÂª∫‰∫ÜÊï∞ÊçÆÁªìÊûÑ„ÄÅÂàÜÈÖç‰∫ÜÊï∞ÊçÆÁ©∫Èó¥ÔºåË¢´Ë∞ÉÁî®ÁöÑÂáΩÊï∞‰ªÖÂêëÁªìÊûÑ‰ΩìÂ°´ÂÖÖÊï∞ÊçÆ„ÄÇÂÖ∂ÊïàÊûúÁ≠âÂêå‰∫éËøîÂõûÁªìÊûÑ‰Ωì„ÄÇ</p>
</div></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2024/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="Êï∞ÊçÆÁªìÊûÑÂ§ç‰π†Á¨îËÆ∞"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">Êï∞ÊçÆÁªìÊûÑÂ§ç‰π†Á¨îËÆ∞</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2024/05/09/PwnCollege2-ProgramInteraction/" rel="next" title="pwnCollege-2-ProgramInteraction"><span class="post-nav-text">pwnCollege-2-ProgramInteraction</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>ÊÇ®ÈúÄË¶ÅÁßëÂ≠¶‰∏äÁΩëÔºåÊâçÂèØ‰ΩøÁî®ËØÑËÆ∫Âå∫ÂäüËÉΩ„ÄÇ</span><br></div><div id="waline"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/2024/05/23/re4b%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank"></a></div><div class="copyright"><span>&copy; 2022 ‚Äì 2024 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Npc</span></div><div class="footer-custom-text">=w=</div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="Searching..." value=""></div><div class="search-result-container"></div></div></body></html>